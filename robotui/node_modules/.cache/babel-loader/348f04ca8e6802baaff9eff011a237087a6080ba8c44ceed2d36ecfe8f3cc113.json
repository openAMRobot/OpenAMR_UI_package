{"ast":null,"code":"import _slicedToArray from\"/home/darkadius/ros2_ws/src/BotshareWIP/ROS2/robotui/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState,useEffect,useCallback,useContext}from\"react\";import*as Three from\"three\";import{RosContext}from\"../app/App\";import{AppConfig}from\"../shared/constants/index\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var State=function State(){var ros=useContext(RosContext);var _useState=useState(\"0.00\"),_useState2=_slicedToArray(_useState,2),linear=_useState2[0],setLinear=_useState2[1];var _useState3=useState(\"0.00\"),_useState4=_slicedToArray(_useState3,2),angular=_useState4[0],setAngular=_useState4[1];var _useState5=useState(\"0.0\"),_useState6=_slicedToArray(_useState5,2),xCoord=_useState6[0],setXCoord=_useState6[1];var _useState7=useState(\"0.0\"),_useState8=_slicedToArray(_useState7,2),yCoord=_useState8[0],setYCoord=_useState8[1];var _useState9=useState(\"0.0\"),_useState10=_slicedToArray(_useState9,2),orientation=_useState10[0],setOrientation=_useState10[1];var getRobotState=useCallback(function(){var pose_sub=new window.ROSLIB.Topic({ros:ros,name:AppConfig.ROBOT_POSE_TOPIC,messageType:\"nav_msgs/Odometry\"});pose_sub.subscribe(function(message){var positionData=message.pose.pose;var velocityData=message.twist.twist;setXCoord(positionData.position.x.toFixed(2));setYCoord(positionData.position.y.toFixed(2));setLinear(velocityData.linear.x.toFixed(2));setAngular(velocityData.angular.z.toFixed(2));var orientationValue=serializeOrientation(positionData.orientation);setOrientation(orientationValue.toFixed(2));});},[ros]);var serializeOrientation=function serializeOrientation(orientation){var q=new Three.Quaternion(orientation.x,orientation.y,orientation.z,orientation.w);var RPY=new Three.Euler().setFromQuaternion(q);return RPY[\"_z\"]*(180/Math.PI);};useEffect(function(){getRobotState();},[getRobotState]);return/*#__PURE__*/_jsxs(\"div\",{className:\"flex w-full gap-14\",children:[/*#__PURE__*/_jsxs(\"article\",{className:\"h-[163px] w-full rounded-lg bg-white font-[RobotoMono] \",children:[/*#__PURE__*/_jsx(\"header\",{className:\"flex items-center justify-between rounded-t-lg bg-themeBlue px-4 py-2\",children:/*#__PURE__*/_jsx(\"h2\",{className:\"text-2xl text-white\",children:\"Velocity\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex h-[105px] flex-col justify-around overflow-y-auto rounded-b-lg border border-themeBlue px-4 py-3 font-[RobotoMono] text-[20px] text-themeTextGray\",children:[/*#__PURE__*/_jsxs(\"p\",{children:[\"Linear: \",linear,\" m/s\"]}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Angular: \",angular,\" rad/s \"]})]})]}),/*#__PURE__*/_jsxs(\"article\",{className:\"h-[163px] w-full rounded-lg bg-white font-[RobotoMono] \",children:[/*#__PURE__*/_jsx(\"header\",{className:\"flex items-center justify-between rounded-t-lg bg-themeBlue px-4 py-2\",children:/*#__PURE__*/_jsx(\"h2\",{className:\"text-2xl text-white\",children:\"Position\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\" flex h-[105px] flex-col  justify-around overflow-y-auto rounded-b-lg border border-themeBlue px-4 py-3 font-[RobotoMono] text-[20px] text-themeTextGray\",children:[/*#__PURE__*/_jsxs(\"p\",{children:[\"X: \",xCoord,\" Y: \",yCoord]}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Orientation: \",orientation]})]})]})]});};export default State;","map":{"version":3,"names":["React","useState","useEffect","useCallback","useContext","Three","RosContext","AppConfig","jsx","_jsx","jsxs","_jsxs","State","ros","_useState","_useState2","_slicedToArray","linear","setLinear","_useState3","_useState4","angular","setAngular","_useState5","_useState6","xCoord","setXCoord","_useState7","_useState8","yCoord","setYCoord","_useState9","_useState10","orientation","setOrientation","getRobotState","pose_sub","window","ROSLIB","Topic","name","ROBOT_POSE_TOPIC","messageType","subscribe","message","positionData","pose","velocityData","twist","position","x","toFixed","y","z","orientationValue","serializeOrientation","q","Quaternion","w","RPY","Euler","setFromQuaternion","Math","PI","className","children"],"sources":["/home/darkadius/ros2_ws/src/BotshareWIP/ROS2/robotui/src/components/RobotState.jsx"],"sourcesContent":["import React, { useState, useEffect, useCallback, useContext } from \"react\";\nimport * as Three from \"three\";\n\nimport { RosContext } from \"../app/App\";\nimport { AppConfig } from \"../shared/constants/index\";\n\nconst State = () => {\n  const ros = useContext(RosContext);\n\n  const [linear, setLinear] = useState(\"0.00\");\n  const [angular, setAngular] = useState(\"0.00\");\n  const [xCoord, setXCoord] = useState(\"0.0\");\n  const [yCoord, setYCoord] = useState(\"0.0\");\n  const [orientation, setOrientation] = useState(\"0.0\");\n\n  const getRobotState = useCallback(() => {\n    let pose_sub = new window.ROSLIB.Topic({\n      ros,\n      name: AppConfig.ROBOT_POSE_TOPIC,\n      messageType: \"nav_msgs/Odometry\",\n    });\n\n    pose_sub.subscribe((message) => {\n      const positionData = message.pose.pose;\n      const velocityData = message.twist.twist;\n\n      setXCoord(positionData.position.x.toFixed(2));\n      setYCoord(positionData.position.y.toFixed(2));\n\n      setLinear(velocityData.linear.x.toFixed(2));\n      setAngular(velocityData.angular.z.toFixed(2));\n\n      const orientationValue = serializeOrientation(positionData.orientation);\n      setOrientation(orientationValue.toFixed(2));\n    });\n  }, [ros]);\n\n  const serializeOrientation = (orientation) => {\n    let q = new Three.Quaternion(\n      orientation.x,\n      orientation.y,\n      orientation.z,\n      orientation.w,\n    );\n    let RPY = new Three.Euler().setFromQuaternion(q);\n    return RPY[\"_z\"] * (180 / Math.PI);\n  };\n\n  useEffect(() => {\n    getRobotState();\n  }, [getRobotState]);\n\n  return (\n    <div className=\"flex w-full gap-14\">\n      <article className=\"h-[163px] w-full rounded-lg bg-white font-[RobotoMono] \">\n        <header className=\"flex items-center justify-between rounded-t-lg bg-themeBlue px-4 py-2\">\n          <h2 className=\"text-2xl text-white\">Velocity</h2>\n        </header>\n        <div className=\"flex h-[105px] flex-col justify-around overflow-y-auto rounded-b-lg border border-themeBlue px-4 py-3 font-[RobotoMono] text-[20px] text-themeTextGray\">\n          <p>Linear: {linear} m/s</p>\n          <p>Angular: {angular} rad/s </p>\n        </div>\n      </article>\n\n      <article className=\"h-[163px] w-full rounded-lg bg-white font-[RobotoMono] \">\n        <header className=\"flex items-center justify-between rounded-t-lg bg-themeBlue px-4 py-2\">\n          <h2 className=\"text-2xl text-white\">Position</h2>\n        </header>\n        <div className=\" flex h-[105px] flex-col  justify-around overflow-y-auto rounded-b-lg border border-themeBlue px-4 py-3 font-[RobotoMono] text-[20px] text-themeTextGray\">\n          <p>\n            X: {xCoord} Y: {yCoord}\n          </p>\n          <p>Orientation: {orientation}</p>\n        </div>\n      </article>\n    </div>\n  );\n};\n\nexport default State;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}