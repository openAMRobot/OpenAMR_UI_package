{"ast":null,"code":"import _classCallCheck from \"/home/darkadius/ros2_ws/src/BotshareWIP/ROS2/robotui/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";\nimport _createClass from \"/home/darkadius/ros2_ws/src/BotshareWIP/ROS2/robotui/node_modules/@babel/runtime/helpers/esm/createClass.js\";\nimport _get from \"/home/darkadius/ros2_ws/src/BotshareWIP/ROS2/robotui/node_modules/@babel/runtime/helpers/esm/get.js\";\nimport _getPrototypeOf from \"/home/darkadius/ros2_ws/src/BotshareWIP/ROS2/robotui/node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js\";\nimport _inherits from \"/home/darkadius/ros2_ws/src/BotshareWIP/ROS2/robotui/node_modules/@babel/runtime/helpers/esm/inherits.js\";\nimport _createSuper from \"/home/darkadius/ros2_ws/src/BotshareWIP/ROS2/robotui/node_modules/@babel/runtime/helpers/esm/createSuper.js\";\nimport Node, { addNodeClass } from '../core/Node.js';\nimport { NodeUpdateType } from '../core/constants.js';\nimport { uniform } from '../core/UniformNode.js';\nimport { nodeImmutable, vec2 } from '../shadernode/ShaderNode.js';\nimport { Vector2, Vector4 } from 'three';\nvar resolution, viewportResult;\nvar ViewportNode = /*#__PURE__*/function (_Node) {\n  _inherits(ViewportNode, _Node);\n  var _super = _createSuper(ViewportNode);\n  function ViewportNode(scope) {\n    var _this;\n    _classCallCheck(this, ViewportNode);\n    _this = _super.call(this);\n    _this.scope = scope;\n    _this.isViewportNode = true;\n    return _this;\n  }\n  _createClass(ViewportNode, [{\n    key: \"getNodeType\",\n    value: function getNodeType() {\n      return this.scope === ViewportNode.COORDINATE || this.scope === ViewportNode.VIEWPORT ? 'vec4' : 'vec2';\n    }\n  }, {\n    key: \"getUpdateType\",\n    value: function getUpdateType() {\n      var updateType = NodeUpdateType.NONE;\n      if (this.scope === ViewportNode.RESOLUTION || this.scope === ViewportNode.VIEWPORT) {\n        updateType = NodeUpdateType.FRAME;\n      }\n      this.updateType = updateType;\n      return updateType;\n    }\n  }, {\n    key: \"update\",\n    value: function update(_ref) {\n      var renderer = _ref.renderer;\n      if (this.scope === ViewportNode.VIEWPORT) {\n        renderer.getViewport(viewportResult);\n      } else {\n        renderer.getDrawingBufferSize(resolution);\n      }\n    }\n  }, {\n    key: \"setup\",\n    value: function setup(builder) {\n      var scope = this.scope;\n      if (scope === ViewportNode.COORDINATE) return;\n      var output = null;\n      if (scope === ViewportNode.RESOLUTION) {\n        output = uniform(resolution || (resolution = new Vector2()));\n      } else if (scope === ViewportNode.VIEWPORT) {\n        output = uniform(viewportResult || (viewportResult = new Vector4()));\n      } else {\n        var coordinateNode = vec2(new ViewportNode(ViewportNode.COORDINATE));\n        var resolutionNode = new ViewportNode(ViewportNode.RESOLUTION);\n        output = coordinateNode.div(resolutionNode);\n        var outX = output.x;\n        var outY = output.y;\n        if (/top/i.test(scope) && builder.isFlipY()) outY = outY.oneMinus();else if (/bottom/i.test(scope) && builder.isFlipY() === false) outY = outY.oneMinus();\n        if (/right/i.test(scope)) outX = outX.oneMinus();\n        output = vec2(outX, outY);\n      }\n      return output;\n    }\n  }, {\n    key: \"generate\",\n    value: function generate(builder) {\n      if (this.scope === ViewportNode.COORDINATE) {\n        return builder.getFragCoord();\n      }\n      return _get(_getPrototypeOf(ViewportNode.prototype), \"generate\", this).call(this, builder);\n    }\n  }]);\n  return ViewportNode;\n}(Node);\nViewportNode.COORDINATE = 'coordinate';\nViewportNode.RESOLUTION = 'resolution';\nViewportNode.VIEWPORT = 'viewport';\nViewportNode.TOP_LEFT = 'topLeft';\nViewportNode.BOTTOM_LEFT = 'bottomLeft';\nViewportNode.TOP_RIGHT = 'topRight';\nViewportNode.BOTTOM_RIGHT = 'bottomRight';\nexport default ViewportNode;\nexport var viewportCoordinate = nodeImmutable(ViewportNode, ViewportNode.COORDINATE);\nexport var viewportResolution = nodeImmutable(ViewportNode, ViewportNode.RESOLUTION);\nexport var viewport = nodeImmutable(ViewportNode, ViewportNode.VIEWPORT);\nexport var viewportTopLeft = nodeImmutable(ViewportNode, ViewportNode.TOP_LEFT);\nexport var viewportBottomLeft = nodeImmutable(ViewportNode, ViewportNode.BOTTOM_LEFT);\nexport var viewportTopRight = nodeImmutable(ViewportNode, ViewportNode.TOP_RIGHT);\nexport var viewportBottomRight = nodeImmutable(ViewportNode, ViewportNode.BOTTOM_RIGHT);\naddNodeClass('ViewportNode', ViewportNode);","map":{"version":3,"names":["Node","addNodeClass","NodeUpdateType","uniform","nodeImmutable","vec2","Vector2","Vector4","resolution","viewportResult","ViewportNode","_Node","_inherits","_super","_createSuper","scope","_this","_classCallCheck","call","isViewportNode","_createClass","key","value","getNodeType","COORDINATE","VIEWPORT","getUpdateType","updateType","NONE","RESOLUTION","FRAME","update","_ref","renderer","getViewport","getDrawingBufferSize","setup","builder","output","coordinateNode","resolutionNode","div","outX","x","outY","y","test","isFlipY","oneMinus","generate","getFragCoord","_get","_getPrototypeOf","prototype","TOP_LEFT","BOTTOM_LEFT","TOP_RIGHT","BOTTOM_RIGHT","viewportCoordinate","viewportResolution","viewport","viewportTopLeft","viewportBottomLeft","viewportTopRight","viewportBottomRight"],"sources":["/home/darkadius/ros2_ws/src/BotshareWIP/ROS2/robotui/node_modules/three/examples/jsm/nodes/display/ViewportNode.js"],"sourcesContent":["import Node, { addNodeClass } from '../core/Node.js';\nimport { NodeUpdateType } from '../core/constants.js';\nimport { uniform } from '../core/UniformNode.js';\nimport { nodeImmutable, vec2 } from '../shadernode/ShaderNode.js';\n\nimport { Vector2, Vector4 } from 'three';\n\nlet resolution, viewportResult;\n\nclass ViewportNode extends Node {\n\n\tconstructor( scope ) {\n\n\t\tsuper();\n\n\t\tthis.scope = scope;\n\n\t\tthis.isViewportNode = true;\n\n\t}\n\n\tgetNodeType() {\n\n\t\treturn this.scope === ViewportNode.COORDINATE || this.scope === ViewportNode.VIEWPORT ? 'vec4' : 'vec2';\n\n\t}\n\n\tgetUpdateType() {\n\n\t\tlet updateType = NodeUpdateType.NONE;\n\n\t\tif ( this.scope === ViewportNode.RESOLUTION || this.scope === ViewportNode.VIEWPORT ) {\n\n\t\t\tupdateType = NodeUpdateType.FRAME;\n\n\t\t}\n\n\t\tthis.updateType = updateType;\n\n\t\treturn updateType;\n\n\t}\n\n\tupdate( { renderer } ) {\n\n\t\tif ( this.scope === ViewportNode.VIEWPORT ) {\n\n\t\t\trenderer.getViewport( viewportResult );\n\n\t\t} else {\n\n\t\t\trenderer.getDrawingBufferSize( resolution );\n\n\t\t}\n\n\t}\n\n\tsetup( builder ) {\n\n\t\tconst scope = this.scope;\n\n\t\tif ( scope === ViewportNode.COORDINATE ) return;\n\n\t\tlet output = null;\n\n\t\tif ( scope === ViewportNode.RESOLUTION ) {\n\n\t\t\toutput = uniform( resolution || ( resolution = new Vector2() ) );\n\n\t\t} else if ( scope === ViewportNode.VIEWPORT ) {\n\n\t\t\toutput = uniform( viewportResult || ( viewportResult = new Vector4() ) );\n\n\t\t} else {\n\n\t\t\tconst coordinateNode = vec2( new ViewportNode( ViewportNode.COORDINATE ) );\n\t\t\tconst resolutionNode = new ViewportNode( ViewportNode.RESOLUTION );\n\n\t\t\toutput = coordinateNode.div( resolutionNode );\n\n\t\t\tlet outX = output.x;\n\t\t\tlet outY = output.y;\n\n\t\t\tif ( /top/i.test( scope ) && builder.isFlipY() ) outY = outY.oneMinus();\n\t\t\telse if ( /bottom/i.test( scope ) && builder.isFlipY() === false ) outY = outY.oneMinus();\n\n\t\t\tif ( /right/i.test( scope ) ) outX = outX.oneMinus();\n\n\t\t\toutput = vec2( outX, outY );\n\n\t\t}\n\n\t\treturn output;\n\n\t}\n\n\tgenerate( builder ) {\n\n\t\tif ( this.scope === ViewportNode.COORDINATE ) {\n\n\t\t\treturn builder.getFragCoord();\n\n\t\t}\n\n\t\treturn super.generate( builder );\n\n\t}\n\n}\n\nViewportNode.COORDINATE = 'coordinate';\nViewportNode.RESOLUTION = 'resolution';\nViewportNode.VIEWPORT = 'viewport';\nViewportNode.TOP_LEFT = 'topLeft';\nViewportNode.BOTTOM_LEFT = 'bottomLeft';\nViewportNode.TOP_RIGHT = 'topRight';\nViewportNode.BOTTOM_RIGHT = 'bottomRight';\n\nexport default ViewportNode;\n\nexport const viewportCoordinate = nodeImmutable( ViewportNode, ViewportNode.COORDINATE );\nexport const viewportResolution = nodeImmutable( ViewportNode, ViewportNode.RESOLUTION );\nexport const viewport = nodeImmutable( ViewportNode, ViewportNode.VIEWPORT );\nexport const viewportTopLeft = nodeImmutable( ViewportNode, ViewportNode.TOP_LEFT );\nexport const viewportBottomLeft = nodeImmutable( ViewportNode, ViewportNode.BOTTOM_LEFT );\nexport const viewportTopRight = nodeImmutable( ViewportNode, ViewportNode.TOP_RIGHT );\nexport const viewportBottomRight = nodeImmutable( ViewportNode, ViewportNode.BOTTOM_RIGHT );\n\naddNodeClass( 'ViewportNode', ViewportNode );\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}