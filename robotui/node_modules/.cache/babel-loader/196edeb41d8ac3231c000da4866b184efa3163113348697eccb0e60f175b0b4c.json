{"ast":null,"code":"import F_Schlick from './F_Schlick.js';\nimport V_GGX_SmithCorrelated from './V_GGX_SmithCorrelated.js';\nimport D_GGX from './D_GGX.js';\nimport { transformedNormalView } from '../../accessors/NormalNode.js';\nimport { positionViewDirection } from '../../accessors/PositionNode.js';\nimport { iridescence } from '../../core/PropertyNode.js';\nimport { tslFn } from '../../shadernode/ShaderNode.js';\n\n// GGX Distribution, Schlick Fresnel, GGX_SmithCorrelated Visibility\nvar BRDF_GGX = tslFn(function (inputs) {\n  var lightDirection = inputs.lightDirection,\n    f0 = inputs.f0,\n    f90 = inputs.f90,\n    roughness = inputs.roughness,\n    iridescenceFresnel = inputs.iridescenceFresnel;\n  var normalView = inputs.normalView || transformedNormalView;\n  var alpha = roughness.pow2(); // UE4's roughness\n\n  var halfDir = lightDirection.add(positionViewDirection).normalize();\n  var dotNL = normalView.dot(lightDirection).clamp();\n  var dotNV = normalView.dot(positionViewDirection).clamp(); // @ TODO: Move to core dotNV\n  var dotNH = normalView.dot(halfDir).clamp();\n  var dotVH = positionViewDirection.dot(halfDir).clamp();\n  var F = F_Schlick({\n    f0: f0,\n    f90: f90,\n    dotVH: dotVH\n  });\n  if (iridescenceFresnel) {\n    F = iridescence.mix(F, iridescenceFresnel);\n  }\n  var V = V_GGX_SmithCorrelated({\n    alpha: alpha,\n    dotNL: dotNL,\n    dotNV: dotNV\n  });\n  var D = D_GGX({\n    alpha: alpha,\n    dotNH: dotNH\n  });\n  return F.mul(V).mul(D);\n}); // validated\n\nexport default BRDF_GGX;","map":{"version":3,"names":["F_Schlick","V_GGX_SmithCorrelated","D_GGX","transformedNormalView","positionViewDirection","iridescence","tslFn","BRDF_GGX","inputs","lightDirection","f0","f90","roughness","iridescenceFresnel","normalView","alpha","pow2","halfDir","add","normalize","dotNL","dot","clamp","dotNV","dotNH","dotVH","F","mix","V","D","mul"],"sources":["/home/darkadius/ros2_ws/src/BotshareWIP/ROS2/robotui/node_modules/three/examples/jsm/nodes/functions/BSDF/BRDF_GGX.js"],"sourcesContent":["import F_Schlick from './F_Schlick.js';\nimport V_GGX_SmithCorrelated from './V_GGX_SmithCorrelated.js';\nimport D_GGX from './D_GGX.js';\nimport { transformedNormalView } from '../../accessors/NormalNode.js';\nimport { positionViewDirection } from '../../accessors/PositionNode.js';\nimport { iridescence } from '../../core/PropertyNode.js';\nimport { tslFn } from '../../shadernode/ShaderNode.js';\n\n// GGX Distribution, Schlick Fresnel, GGX_SmithCorrelated Visibility\nconst BRDF_GGX = tslFn( ( inputs ) => {\n\n\tconst { lightDirection, f0, f90, roughness, iridescenceFresnel } = inputs;\n\n\tconst normalView = inputs.normalView || transformedNormalView;\n\n\tconst alpha = roughness.pow2(); // UE4's roughness\n\n\tconst halfDir = lightDirection.add( positionViewDirection ).normalize();\n\n\tconst dotNL = normalView.dot( lightDirection ).clamp();\n\tconst dotNV = normalView.dot( positionViewDirection ).clamp(); // @ TODO: Move to core dotNV\n\tconst dotNH = normalView.dot( halfDir ).clamp();\n\tconst dotVH = positionViewDirection.dot( halfDir ).clamp();\n\n\tlet F = F_Schlick( { f0, f90, dotVH } );\n\n\tif ( iridescenceFresnel ) {\n\n\t\tF = iridescence.mix( F, iridescenceFresnel );\n\n\t}\n\n\tconst V = V_GGX_SmithCorrelated( { alpha, dotNL, dotNV } );\n\tconst D = D_GGX( { alpha, dotNH } );\n\n\treturn F.mul( V ).mul( D );\n\n} ); // validated\n\nexport default BRDF_GGX;\n"],"mappings":"AAAA,OAAOA,SAAS,MAAM,gBAAgB;AACtC,OAAOC,qBAAqB,MAAM,4BAA4B;AAC9D,OAAOC,KAAK,MAAM,YAAY;AAC9B,SAASC,qBAAqB,QAAQ,+BAA+B;AACrE,SAASC,qBAAqB,QAAQ,iCAAiC;AACvE,SAASC,WAAW,QAAQ,4BAA4B;AACxD,SAASC,KAAK,QAAQ,gCAAgC;;AAEtD;AACA,IAAMC,QAAQ,GAAGD,KAAK,CAAE,UAAEE,MAAM,EAAM;EAErC,IAAQC,cAAc,GAA6CD,MAAM,CAAjEC,cAAc;IAAEC,EAAE,GAAyCF,MAAM,CAAjDE,EAAE;IAAEC,GAAG,GAAoCH,MAAM,CAA7CG,GAAG;IAAEC,SAAS,GAAyBJ,MAAM,CAAxCI,SAAS;IAAEC,kBAAkB,GAAKL,MAAM,CAA7BK,kBAAkB;EAE9D,IAAMC,UAAU,GAAGN,MAAM,CAACM,UAAU,IAAIX,qBAAqB;EAE7D,IAAMY,KAAK,GAAGH,SAAS,CAACI,IAAI,CAAC,CAAC,CAAC,CAAC;;EAEhC,IAAMC,OAAO,GAAGR,cAAc,CAACS,GAAG,CAAEd,qBAAsB,CAAC,CAACe,SAAS,CAAC,CAAC;EAEvE,IAAMC,KAAK,GAAGN,UAAU,CAACO,GAAG,CAAEZ,cAAe,CAAC,CAACa,KAAK,CAAC,CAAC;EACtD,IAAMC,KAAK,GAAGT,UAAU,CAACO,GAAG,CAAEjB,qBAAsB,CAAC,CAACkB,KAAK,CAAC,CAAC,CAAC,CAAC;EAC/D,IAAME,KAAK,GAAGV,UAAU,CAACO,GAAG,CAAEJ,OAAQ,CAAC,CAACK,KAAK,CAAC,CAAC;EAC/C,IAAMG,KAAK,GAAGrB,qBAAqB,CAACiB,GAAG,CAAEJ,OAAQ,CAAC,CAACK,KAAK,CAAC,CAAC;EAE1D,IAAII,CAAC,GAAG1B,SAAS,CAAE;IAAEU,EAAE,EAAFA,EAAE;IAAEC,GAAG,EAAHA,GAAG;IAAEc,KAAK,EAALA;EAAM,CAAE,CAAC;EAEvC,IAAKZ,kBAAkB,EAAG;IAEzBa,CAAC,GAAGrB,WAAW,CAACsB,GAAG,CAAED,CAAC,EAAEb,kBAAmB,CAAC;EAE7C;EAEA,IAAMe,CAAC,GAAG3B,qBAAqB,CAAE;IAAEc,KAAK,EAALA,KAAK;IAAEK,KAAK,EAALA,KAAK;IAAEG,KAAK,EAALA;EAAM,CAAE,CAAC;EAC1D,IAAMM,CAAC,GAAG3B,KAAK,CAAE;IAAEa,KAAK,EAALA,KAAK;IAAES,KAAK,EAALA;EAAM,CAAE,CAAC;EAEnC,OAAOE,CAAC,CAACI,GAAG,CAAEF,CAAE,CAAC,CAACE,GAAG,CAAED,CAAE,CAAC;AAE3B,CAAE,CAAC,CAAC,CAAC;;AAEL,eAAetB,QAAQ"},"metadata":{},"sourceType":"module","externalDependencies":[]}