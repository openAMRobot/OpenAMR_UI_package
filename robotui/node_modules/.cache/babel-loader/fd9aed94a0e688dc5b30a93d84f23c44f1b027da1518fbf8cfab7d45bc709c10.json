{"ast":null,"code":"import _classCallCheck from \"/home/darkadius/ros2_ws/src/BotshareWIP/ROS2/robotui/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";\nimport _createClass from \"/home/darkadius/ros2_ws/src/BotshareWIP/ROS2/robotui/node_modules/@babel/runtime/helpers/esm/createClass.js\";\nimport _inherits from \"/home/darkadius/ros2_ws/src/BotshareWIP/ROS2/robotui/node_modules/@babel/runtime/helpers/esm/inherits.js\";\nimport _createSuper from \"/home/darkadius/ros2_ws/src/BotshareWIP/ROS2/robotui/node_modules/@babel/runtime/helpers/esm/createSuper.js\";\nimport Node, { addNodeClass } from '../core/Node.js';\nimport { NodeUpdateType } from '../core/constants.js';\nimport { nodeProxy } from '../shadernode/ShaderNode.js';\nimport { uniform } from '../core/UniformNode.js';\nimport { reference } from './ReferenceNode.js';\nimport { bufferAttribute } from './BufferAttributeNode.js';\nimport { positionLocal } from './PositionNode.js';\nvar MorphNode = /*#__PURE__*/function (_Node) {\n  _inherits(MorphNode, _Node);\n  var _super = _createSuper(MorphNode);\n  function MorphNode(mesh) {\n    var _this;\n    _classCallCheck(this, MorphNode);\n    _this = _super.call(this, 'void');\n    _this.mesh = mesh;\n    _this.morphBaseInfluence = uniform(1);\n    _this.updateType = NodeUpdateType.OBJECT;\n    return _this;\n  }\n  _createClass(MorphNode, [{\n    key: \"setupAttribute\",\n    value: function setupAttribute(builder, name) {\n      var assignNode = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : positionLocal;\n      var mesh = this.mesh;\n      var attributes = mesh.geometry.morphAttributes[name];\n      builder.stack.assign(assignNode, assignNode.mul(this.morphBaseInfluence));\n      for (var i = 0; i < attributes.length; i++) {\n        var attribute = attributes[i];\n        var bufferAttrib = bufferAttribute(attribute.array, 'vec3');\n        var influence = reference(i, 'float', mesh.morphTargetInfluences);\n        builder.stack.assign(assignNode, assignNode.add(bufferAttrib.mul(influence)));\n      }\n    }\n  }, {\n    key: \"setup\",\n    value: function setup(builder) {\n      this.setupAttribute(builder, 'position');\n    }\n  }, {\n    key: \"update\",\n    value: function update() {\n      var morphBaseInfluence = this.morphBaseInfluence;\n      if (this.mesh.geometry.morphTargetsRelative) {\n        morphBaseInfluence.value = 1;\n      } else {\n        morphBaseInfluence.value = 1 - this.mesh.morphTargetInfluences.reduce(function (a, b) {\n          return a + b;\n        }, 0);\n      }\n    }\n  }]);\n  return MorphNode;\n}(Node);\nexport default MorphNode;\nexport var morph = nodeProxy(MorphNode);\naddNodeClass('MorphNode', MorphNode);","map":{"version":3,"names":["Node","addNodeClass","NodeUpdateType","nodeProxy","uniform","reference","bufferAttribute","positionLocal","MorphNode","_Node","_inherits","_super","_createSuper","mesh","_this","_classCallCheck","call","morphBaseInfluence","updateType","OBJECT","_createClass","key","value","setupAttribute","builder","name","assignNode","arguments","length","undefined","attributes","geometry","morphAttributes","stack","assign","mul","i","attribute","bufferAttrib","array","influence","morphTargetInfluences","add","setup","update","morphTargetsRelative","reduce","a","b","morph"],"sources":["/home/darkadius/ros2_ws/src/BotshareWIP/ROS2/robotui/node_modules/three/examples/jsm/nodes/accessors/MorphNode.js"],"sourcesContent":["import Node, { addNodeClass } from '../core/Node.js';\nimport { NodeUpdateType } from '../core/constants.js';\nimport { nodeProxy } from '../shadernode/ShaderNode.js';\nimport { uniform } from '../core/UniformNode.js';\nimport { reference } from './ReferenceNode.js';\nimport { bufferAttribute } from './BufferAttributeNode.js';\nimport { positionLocal } from './PositionNode.js';\n\nclass MorphNode extends Node {\n\n\tconstructor( mesh ) {\n\n\t\tsuper( 'void' );\n\n\t\tthis.mesh = mesh;\n\t\tthis.morphBaseInfluence = uniform( 1 );\n\n\t\tthis.updateType = NodeUpdateType.OBJECT;\n\n\t}\n\n\tsetupAttribute( builder, name, assignNode = positionLocal ) {\n\n\t\tconst mesh = this.mesh;\n\t\tconst attributes = mesh.geometry.morphAttributes[ name ];\n\n\t\tbuilder.stack.assign( assignNode, assignNode.mul( this.morphBaseInfluence ) );\n\n\t\tfor ( let i = 0; i < attributes.length; i ++ ) {\n\n\t\t\tconst attribute = attributes[ i ];\n\n\t\t\tconst bufferAttrib = bufferAttribute( attribute.array, 'vec3' );\n\t\t\tconst influence = reference( i, 'float', mesh.morphTargetInfluences );\n\n\t\t\tbuilder.stack.assign( assignNode, assignNode.add( bufferAttrib.mul( influence ) ) );\n\n\t\t}\n\n\t}\n\n\tsetup( builder ) {\n\n\t\tthis.setupAttribute( builder, 'position' );\n\n\t}\n\n\tupdate() {\n\n\t\tconst morphBaseInfluence = this.morphBaseInfluence;\n\n\t\tif ( this.mesh.geometry.morphTargetsRelative ) {\n\n\t\t\tmorphBaseInfluence.value = 1;\n\n\t\t} else {\n\n\t\t\tmorphBaseInfluence.value = 1 - this.mesh.morphTargetInfluences.reduce( ( a, b ) => a + b, 0 );\n\n\t\t}\n\n\t}\n\n}\n\nexport default MorphNode;\n\nexport const morph = nodeProxy( MorphNode );\n\naddNodeClass( 'MorphNode', MorphNode );\n"],"mappings":";;;;AAAA,OAAOA,IAAI,IAAIC,YAAY,QAAQ,iBAAiB;AACpD,SAASC,cAAc,QAAQ,sBAAsB;AACrD,SAASC,SAAS,QAAQ,6BAA6B;AACvD,SAASC,OAAO,QAAQ,wBAAwB;AAChD,SAASC,SAAS,QAAQ,oBAAoB;AAC9C,SAASC,eAAe,QAAQ,0BAA0B;AAC1D,SAASC,aAAa,QAAQ,mBAAmB;AAAC,IAE5CC,SAAS,0BAAAC,KAAA;EAAAC,SAAA,CAAAF,SAAA,EAAAC,KAAA;EAAA,IAAAE,MAAA,GAAAC,YAAA,CAAAJ,SAAA;EAEd,SAAAA,UAAaK,IAAI,EAAG;IAAA,IAAAC,KAAA;IAAAC,eAAA,OAAAP,SAAA;IAEnBM,KAAA,GAAAH,MAAA,CAAAK,IAAA,OAAO,MAAM;IAEbF,KAAA,CAAKD,IAAI,GAAGA,IAAI;IAChBC,KAAA,CAAKG,kBAAkB,GAAGb,OAAO,CAAE,CAAE,CAAC;IAEtCU,KAAA,CAAKI,UAAU,GAAGhB,cAAc,CAACiB,MAAM;IAAC,OAAAL,KAAA;EAEzC;EAACM,YAAA,CAAAZ,SAAA;IAAAa,GAAA;IAAAC,KAAA,EAED,SAAAC,eAAgBC,OAAO,EAAEC,IAAI,EAA+B;MAAA,IAA7BC,UAAU,GAAAC,SAAA,CAAAC,MAAA,QAAAD,SAAA,QAAAE,SAAA,GAAAF,SAAA,MAAGpB,aAAa;MAExD,IAAMM,IAAI,GAAG,IAAI,CAACA,IAAI;MACtB,IAAMiB,UAAU,GAAGjB,IAAI,CAACkB,QAAQ,CAACC,eAAe,CAAEP,IAAI,CAAE;MAExDD,OAAO,CAACS,KAAK,CAACC,MAAM,CAAER,UAAU,EAAEA,UAAU,CAACS,GAAG,CAAE,IAAI,CAAClB,kBAAmB,CAAE,CAAC;MAE7E,KAAM,IAAImB,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGN,UAAU,CAACF,MAAM,EAAEQ,CAAC,EAAG,EAAG;QAE9C,IAAMC,SAAS,GAAGP,UAAU,CAAEM,CAAC,CAAE;QAEjC,IAAME,YAAY,GAAGhC,eAAe,CAAE+B,SAAS,CAACE,KAAK,EAAE,MAAO,CAAC;QAC/D,IAAMC,SAAS,GAAGnC,SAAS,CAAE+B,CAAC,EAAE,OAAO,EAAEvB,IAAI,CAAC4B,qBAAsB,CAAC;QAErEjB,OAAO,CAACS,KAAK,CAACC,MAAM,CAAER,UAAU,EAAEA,UAAU,CAACgB,GAAG,CAAEJ,YAAY,CAACH,GAAG,CAAEK,SAAU,CAAE,CAAE,CAAC;MAEpF;IAED;EAAC;IAAAnB,GAAA;IAAAC,KAAA,EAED,SAAAqB,MAAOnB,OAAO,EAAG;MAEhB,IAAI,CAACD,cAAc,CAAEC,OAAO,EAAE,UAAW,CAAC;IAE3C;EAAC;IAAAH,GAAA;IAAAC,KAAA,EAED,SAAAsB,OAAA,EAAS;MAER,IAAM3B,kBAAkB,GAAG,IAAI,CAACA,kBAAkB;MAElD,IAAK,IAAI,CAACJ,IAAI,CAACkB,QAAQ,CAACc,oBAAoB,EAAG;QAE9C5B,kBAAkB,CAACK,KAAK,GAAG,CAAC;MAE7B,CAAC,MAAM;QAENL,kBAAkB,CAACK,KAAK,GAAG,CAAC,GAAG,IAAI,CAACT,IAAI,CAAC4B,qBAAqB,CAACK,MAAM,CAAE,UAAEC,CAAC,EAAEC,CAAC;UAAA,OAAMD,CAAC,GAAGC,CAAC;QAAA,GAAE,CAAE,CAAC;MAE9F;IAED;EAAC;EAAA,OAAAxC,SAAA;AAAA,EArDsBR,IAAI;AAyD5B,eAAeQ,SAAS;AAExB,OAAO,IAAMyC,KAAK,GAAG9C,SAAS,CAAEK,SAAU,CAAC;AAE3CP,YAAY,CAAE,WAAW,EAAEO,SAAU,CAAC"},"metadata":{},"sourceType":"module","externalDependencies":[]}