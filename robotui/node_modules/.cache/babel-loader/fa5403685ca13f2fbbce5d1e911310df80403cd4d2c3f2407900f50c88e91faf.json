{"ast":null,"code":"import _classCallCheck from \"/home/darkadius/ros2_ws/src/BotshareWIP/ROS2/robotui/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";\nimport _createClass from \"/home/darkadius/ros2_ws/src/BotshareWIP/ROS2/robotui/node_modules/@babel/runtime/helpers/esm/createClass.js\";\nimport _get from \"/home/darkadius/ros2_ws/src/BotshareWIP/ROS2/robotui/node_modules/@babel/runtime/helpers/esm/get.js\";\nimport _getPrototypeOf from \"/home/darkadius/ros2_ws/src/BotshareWIP/ROS2/robotui/node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js\";\nimport _inherits from \"/home/darkadius/ros2_ws/src/BotshareWIP/ROS2/robotui/node_modules/@babel/runtime/helpers/esm/inherits.js\";\nimport _createSuper from \"/home/darkadius/ros2_ws/src/BotshareWIP/ROS2/robotui/node_modules/@babel/runtime/helpers/esm/createSuper.js\";\nimport Node, { addNodeClass } from '../core/Node.js';\nimport { NodeUpdateType } from '../core/constants.js';\nimport UniformNode from '../core/UniformNode.js';\nimport { nodeProxy } from '../shadernode/ShaderNode.js';\nimport { Vector3 } from 'three';\nvar Object3DNode = /*#__PURE__*/function (_Node) {\n  _inherits(Object3DNode, _Node);\n  var _super = _createSuper(Object3DNode);\n  function Object3DNode() {\n    var _this;\n    var scope = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : Object3DNode.VIEW_MATRIX;\n    var object3d = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : null;\n    _classCallCheck(this, Object3DNode);\n    _this = _super.call(this);\n    _this.scope = scope;\n    _this.object3d = object3d;\n    _this.updateType = NodeUpdateType.OBJECT;\n    _this._uniformNode = new UniformNode(null);\n    return _this;\n  }\n  _createClass(Object3DNode, [{\n    key: \"getNodeType\",\n    value: function getNodeType() {\n      var scope = this.scope;\n      if (scope === Object3DNode.WORLD_MATRIX || scope === Object3DNode.VIEW_MATRIX) {\n        return 'mat4';\n      } else if (scope === Object3DNode.NORMAL_MATRIX) {\n        return 'mat3';\n      } else if (scope === Object3DNode.POSITION || scope === Object3DNode.VIEW_POSITION || scope === Object3DNode.DIRECTION || scope === Object3DNode.SCALE) {\n        return 'vec3';\n      }\n    }\n  }, {\n    key: \"update\",\n    value: function update(frame) {\n      var object = this.object3d;\n      var uniformNode = this._uniformNode;\n      var scope = this.scope;\n      if (scope === Object3DNode.VIEW_MATRIX) {\n        uniformNode.value = object.modelViewMatrix;\n      } else if (scope === Object3DNode.NORMAL_MATRIX) {\n        uniformNode.value = object.normalMatrix;\n      } else if (scope === Object3DNode.WORLD_MATRIX) {\n        uniformNode.value = object.matrixWorld;\n      } else if (scope === Object3DNode.POSITION) {\n        uniformNode.value = uniformNode.value || new Vector3();\n        uniformNode.value.setFromMatrixPosition(object.matrixWorld);\n      } else if (scope === Object3DNode.SCALE) {\n        uniformNode.value = uniformNode.value || new Vector3();\n        uniformNode.value.setFromMatrixScale(object.matrixWorld);\n      } else if (scope === Object3DNode.DIRECTION) {\n        uniformNode.value = uniformNode.value || new Vector3();\n        object.getWorldDirection(uniformNode.value);\n      } else if (scope === Object3DNode.VIEW_POSITION) {\n        var camera = frame.camera;\n        uniformNode.value = uniformNode.value || new Vector3();\n        uniformNode.value.setFromMatrixPosition(object.matrixWorld);\n        uniformNode.value.applyMatrix4(camera.matrixWorldInverse);\n      }\n    }\n  }, {\n    key: \"generate\",\n    value: function generate(builder) {\n      var scope = this.scope;\n      if (scope === Object3DNode.WORLD_MATRIX || scope === Object3DNode.VIEW_MATRIX) {\n        this._uniformNode.nodeType = 'mat4';\n      } else if (scope === Object3DNode.NORMAL_MATRIX) {\n        this._uniformNode.nodeType = 'mat3';\n      } else if (scope === Object3DNode.POSITION || scope === Object3DNode.VIEW_POSITION || scope === Object3DNode.DIRECTION || scope === Object3DNode.SCALE) {\n        this._uniformNode.nodeType = 'vec3';\n      }\n      return this._uniformNode.build(builder);\n    }\n  }, {\n    key: \"serialize\",\n    value: function serialize(data) {\n      _get(_getPrototypeOf(Object3DNode.prototype), \"serialize\", this).call(this, data);\n      data.scope = this.scope;\n    }\n  }, {\n    key: \"deserialize\",\n    value: function deserialize(data) {\n      _get(_getPrototypeOf(Object3DNode.prototype), \"deserialize\", this).call(this, data);\n      this.scope = data.scope;\n    }\n  }]);\n  return Object3DNode;\n}(Node);\nObject3DNode.VIEW_MATRIX = 'viewMatrix';\nObject3DNode.NORMAL_MATRIX = 'normalMatrix';\nObject3DNode.WORLD_MATRIX = 'worldMatrix';\nObject3DNode.POSITION = 'position';\nObject3DNode.SCALE = 'scale';\nObject3DNode.VIEW_POSITION = 'viewPosition';\nObject3DNode.DIRECTION = 'direction';\nexport default Object3DNode;\nexport var objectDirection = nodeProxy(Object3DNode, Object3DNode.DIRECTION);\nexport var objectViewMatrix = nodeProxy(Object3DNode, Object3DNode.VIEW_MATRIX);\nexport var objectNormalMatrix = nodeProxy(Object3DNode, Object3DNode.NORMAL_MATRIX);\nexport var objectWorldMatrix = nodeProxy(Object3DNode, Object3DNode.WORLD_MATRIX);\nexport var objectPosition = nodeProxy(Object3DNode, Object3DNode.POSITION);\nexport var objectScale = nodeProxy(Object3DNode, Object3DNode.SCALE);\nexport var objectViewPosition = nodeProxy(Object3DNode, Object3DNode.VIEW_POSITION);\naddNodeClass('Object3DNode', Object3DNode);","map":{"version":3,"names":["Node","addNodeClass","NodeUpdateType","UniformNode","nodeProxy","Vector3","Object3DNode","_Node","_inherits","_super","_createSuper","_this","scope","arguments","length","undefined","VIEW_MATRIX","object3d","_classCallCheck","call","updateType","OBJECT","_uniformNode","_createClass","key","value","getNodeType","WORLD_MATRIX","NORMAL_MATRIX","POSITION","VIEW_POSITION","DIRECTION","SCALE","update","frame","object","uniformNode","modelViewMatrix","normalMatrix","matrixWorld","setFromMatrixPosition","setFromMatrixScale","getWorldDirection","camera","applyMatrix4","matrixWorldInverse","generate","builder","nodeType","build","serialize","data","_get","_getPrototypeOf","prototype","deserialize","objectDirection","objectViewMatrix","objectNormalMatrix","objectWorldMatrix","objectPosition","objectScale","objectViewPosition"],"sources":["/home/darkadius/ros2_ws/src/BotshareWIP/ROS2/robotui/node_modules/three/examples/jsm/nodes/accessors/Object3DNode.js"],"sourcesContent":["import Node, { addNodeClass } from '../core/Node.js';\nimport { NodeUpdateType } from '../core/constants.js';\nimport UniformNode from '../core/UniformNode.js';\nimport { nodeProxy } from '../shadernode/ShaderNode.js';\n\nimport { Vector3 } from 'three';\n\nclass Object3DNode extends Node {\n\n\tconstructor( scope = Object3DNode.VIEW_MATRIX, object3d = null ) {\n\n\t\tsuper();\n\n\t\tthis.scope = scope;\n\t\tthis.object3d = object3d;\n\n\t\tthis.updateType = NodeUpdateType.OBJECT;\n\n\t\tthis._uniformNode = new UniformNode( null );\n\n\t}\n\n\tgetNodeType() {\n\n\t\tconst scope = this.scope;\n\n\t\tif ( scope === Object3DNode.WORLD_MATRIX || scope === Object3DNode.VIEW_MATRIX ) {\n\n\t\t\treturn 'mat4';\n\n\t\t} else if ( scope === Object3DNode.NORMAL_MATRIX ) {\n\n\t\t\treturn 'mat3';\n\n\t\t} else if ( scope === Object3DNode.POSITION || scope === Object3DNode.VIEW_POSITION || scope === Object3DNode.DIRECTION || scope === Object3DNode.SCALE ) {\n\n\t\t\treturn 'vec3';\n\n\t\t}\n\n\t}\n\n\tupdate( frame ) {\n\n\t\tconst object = this.object3d;\n\t\tconst uniformNode = this._uniformNode;\n\t\tconst scope = this.scope;\n\n\t\tif ( scope === Object3DNode.VIEW_MATRIX ) {\n\n\t\t\tuniformNode.value = object.modelViewMatrix;\n\n\t\t} else if ( scope === Object3DNode.NORMAL_MATRIX ) {\n\n\t\t\tuniformNode.value = object.normalMatrix;\n\n\t\t} else if ( scope === Object3DNode.WORLD_MATRIX ) {\n\n\t\t\tuniformNode.value = object.matrixWorld;\n\n\t\t} else if ( scope === Object3DNode.POSITION ) {\n\n\t\t\tuniformNode.value = uniformNode.value || new Vector3();\n\n\t\t\tuniformNode.value.setFromMatrixPosition( object.matrixWorld );\n\n\t\t} else if ( scope === Object3DNode.SCALE ) {\n\n\t\t\tuniformNode.value = uniformNode.value || new Vector3();\n\n\t\t\tuniformNode.value.setFromMatrixScale( object.matrixWorld );\n\n\t\t} else if ( scope === Object3DNode.DIRECTION ) {\n\n\t\t\tuniformNode.value = uniformNode.value || new Vector3();\n\n\t\t\tobject.getWorldDirection( uniformNode.value );\n\n\t\t} else if ( scope === Object3DNode.VIEW_POSITION ) {\n\n\t\t\tconst camera = frame.camera;\n\n\t\t\tuniformNode.value = uniformNode.value || new Vector3();\n\t\t\tuniformNode.value.setFromMatrixPosition( object.matrixWorld );\n\n\t\t\tuniformNode.value.applyMatrix4( camera.matrixWorldInverse );\n\n\t\t}\n\n\t}\n\n\tgenerate( builder ) {\n\n\t\tconst scope = this.scope;\n\n\t\tif ( scope === Object3DNode.WORLD_MATRIX || scope === Object3DNode.VIEW_MATRIX ) {\n\n\t\t\tthis._uniformNode.nodeType = 'mat4';\n\n\t\t} else if ( scope === Object3DNode.NORMAL_MATRIX ) {\n\n\t\t\tthis._uniformNode.nodeType = 'mat3';\n\n\t\t} else if ( scope === Object3DNode.POSITION || scope === Object3DNode.VIEW_POSITION || scope === Object3DNode.DIRECTION || scope === Object3DNode.SCALE ) {\n\n\t\t\tthis._uniformNode.nodeType = 'vec3';\n\n\t\t}\n\n\t\treturn this._uniformNode.build( builder );\n\n\t}\n\n\tserialize( data ) {\n\n\t\tsuper.serialize( data );\n\n\t\tdata.scope = this.scope;\n\n\t}\n\n\tdeserialize( data ) {\n\n\t\tsuper.deserialize( data );\n\n\t\tthis.scope = data.scope;\n\n\t}\n\n}\n\nObject3DNode.VIEW_MATRIX = 'viewMatrix';\nObject3DNode.NORMAL_MATRIX = 'normalMatrix';\nObject3DNode.WORLD_MATRIX = 'worldMatrix';\nObject3DNode.POSITION = 'position';\nObject3DNode.SCALE = 'scale';\nObject3DNode.VIEW_POSITION = 'viewPosition';\nObject3DNode.DIRECTION = 'direction';\n\nexport default Object3DNode;\n\nexport const objectDirection = nodeProxy( Object3DNode, Object3DNode.DIRECTION );\nexport const objectViewMatrix = nodeProxy( Object3DNode, Object3DNode.VIEW_MATRIX );\nexport const objectNormalMatrix = nodeProxy( Object3DNode, Object3DNode.NORMAL_MATRIX );\nexport const objectWorldMatrix = nodeProxy( Object3DNode, Object3DNode.WORLD_MATRIX );\nexport const objectPosition = nodeProxy( Object3DNode, Object3DNode.POSITION );\nexport const objectScale = nodeProxy( Object3DNode, Object3DNode.SCALE );\nexport const objectViewPosition = nodeProxy( Object3DNode, Object3DNode.VIEW_POSITION );\n\naddNodeClass( 'Object3DNode', Object3DNode );\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}