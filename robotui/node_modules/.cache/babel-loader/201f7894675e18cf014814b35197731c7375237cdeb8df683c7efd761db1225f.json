{"ast":null,"code":"import _regeneratorRuntime from\"/home/darkadius/ros2_ws/src/BotshareWIP/ROS2/robotui/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/home/darkadius/ros2_ws/src/BotshareWIP/ROS2/robotui/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/home/darkadius/ros2_ws/src/BotshareWIP/ROS2/robotui/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useEffect,useCallback,useState}from\"react\";import{AppConfig}from\"../shared/constants/index\";import{jsx as _jsx}from\"react/jsx-runtime\";var Camera=function Camera(){var _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),videoSrc=_useState2[0],setVideoSrc=_useState2[1];var tryToConnectToCamera=useCallback(/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var currentIP,currentUrl,ip,videoSrcString;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:currentIP=window.location.hostname;currentUrl=window.location.href;ip=!currentUrl.includes(\"http://localhost:3000/\")?currentIP:AppConfig.ROSBRIDGE_SERVER_IP;// const videoSrcString = `http://${ip}:${AppConfig.CAMERA_PORT}/stream?topic=/usb_cam/image_raw`;\nvideoSrcString=\"http://\".concat(ip,\":\").concat(AppConfig.CAMERA_PORT,\"/stream?topic=/camera/color/image_raw\");/*\n    /camera/color/image_raw - топик для камеры?\n    */setVideoSrc(videoSrcString);case 5:case\"end\":return _context.stop();}},_callee);})),[]);useEffect(function(){tryToConnectToCamera();},[tryToConnectToCamera]);return/*#__PURE__*/_jsx(\"div\",{className:\"border-themeBlue flex h-full w-full items-center justify-center border rounded-[16px]\",children:/*#__PURE__*/_jsx(\"img\",{src:videoSrc,className:\"h-full w-full\"})});};export default Camera;","map":{"version":3,"names":["React","useEffect","useCallback","useState","AppConfig","jsx","_jsx","Camera","_useState","_useState2","_slicedToArray","videoSrc","setVideoSrc","tryToConnectToCamera","_asyncToGenerator","_regeneratorRuntime","mark","_callee","currentIP","currentUrl","ip","videoSrcString","wrap","_callee$","_context","prev","next","window","location","hostname","href","includes","ROSBRIDGE_SERVER_IP","concat","CAMERA_PORT","stop","className","children","src"],"sources":["/home/darkadius/ros2_ws/src/BotshareWIP/ROS2/robotui/src/components/Camera.jsx"],"sourcesContent":["import React, { useEffect, useCallback, useState } from \"react\";\nimport { AppConfig } from \"../shared/constants/index\";\n\nconst Camera = () => {\n  const [videoSrc, setVideoSrc] = useState(\"\");\n\n  const tryToConnectToCamera = useCallback(async () => {\n    const currentIP = window.location.hostname;\n    const currentUrl = window.location.href;\n    const ip = !currentUrl.includes(\"http://localhost:3000/\")\n      ? currentIP\n      : AppConfig.ROSBRIDGE_SERVER_IP;\n    // const videoSrcString = `http://${ip}:${AppConfig.CAMERA_PORT}/stream?topic=/usb_cam/image_raw`;\n    const videoSrcString = `http://${ip}:${AppConfig.CAMERA_PORT}/stream?topic=/camera/color/image_raw`;\n    /*\n    /camera/color/image_raw - топик для камеры?\n    */\n    setVideoSrc(videoSrcString);\n  }, []);\n\n  useEffect(() => {\n    tryToConnectToCamera();\n  }, [tryToConnectToCamera]);\n\n  return (\n    <div className=\"border-themeBlue flex h-full w-full items-center justify-center border rounded-[16px]\">\n      <img src={videoSrc} className=\"h-full w-full\" />\n    </div>\n  );\n};\n\nexport default Camera;\n"],"mappings":"8aAAA,MAAO,CAAAA,KAAK,EAAIC,SAAS,CAAEC,WAAW,CAAEC,QAAQ,KAAQ,OAAO,CAC/D,OAASC,SAAS,KAAQ,2BAA2B,CAAC,OAAAC,GAAA,IAAAC,IAAA,yBAEtD,GAAM,CAAAC,MAAM,CAAG,QAAT,CAAAA,MAAMA,CAAA,CAAS,CACnB,IAAAC,SAAA,CAAgCL,QAAQ,CAAC,EAAE,CAAC,CAAAM,UAAA,CAAAC,cAAA,CAAAF,SAAA,IAArCG,QAAQ,CAAAF,UAAA,IAAEG,WAAW,CAAAH,UAAA,IAE5B,GAAM,CAAAI,oBAAoB,CAAGX,WAAW,cAAAY,iBAAA,cAAAC,mBAAA,GAAAC,IAAA,CAAC,SAAAC,QAAA,MAAAC,SAAA,CAAAC,UAAA,CAAAC,EAAA,CAAAC,cAAA,QAAAN,mBAAA,GAAAO,IAAA,UAAAC,SAAAC,QAAA,iBAAAA,QAAA,CAAAC,IAAA,CAAAD,QAAA,CAAAE,IAAA,SACjCR,SAAS,CAAGS,MAAM,CAACC,QAAQ,CAACC,QAAQ,CACpCV,UAAU,CAAGQ,MAAM,CAACC,QAAQ,CAACE,IAAI,CACjCV,EAAE,CAAG,CAACD,UAAU,CAACY,QAAQ,CAAC,wBAAwB,CAAC,CACrDb,SAAS,CACTd,SAAS,CAAC4B,mBAAmB,CACjC;AACMX,cAAc,WAAAY,MAAA,CAAab,EAAE,MAAAa,MAAA,CAAI7B,SAAS,CAAC8B,WAAW,0CAC5D;AACJ;AACA,MACItB,WAAW,CAACS,cAAc,CAAC,CAAC,wBAAAG,QAAA,CAAAW,IAAA,MAAAlB,OAAA,GAC7B,GAAE,EAAE,CAAC,CAENhB,SAAS,CAAC,UAAM,CACdY,oBAAoB,CAAC,CAAC,CACxB,CAAC,CAAE,CAACA,oBAAoB,CAAC,CAAC,CAE1B,mBACEP,IAAA,QAAK8B,SAAS,CAAC,uFAAuF,CAAAC,QAAA,cACpG/B,IAAA,QAAKgC,GAAG,CAAE3B,QAAS,CAACyB,SAAS,CAAC,eAAe,CAAE,CAAC,CAC7C,CAAC,CAEV,CAAC,CAED,cAAe,CAAA7B,MAAM"},"metadata":{},"sourceType":"module","externalDependencies":[]}