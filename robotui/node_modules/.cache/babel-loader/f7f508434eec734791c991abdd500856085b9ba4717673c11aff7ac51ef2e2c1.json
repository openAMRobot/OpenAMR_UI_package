{"ast":null,"code":"import _classCallCheck from \"/home/darkadius/ros2_ws/src/BotshareWIP/ROS2/robotui/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";\nimport _createClass from \"/home/darkadius/ros2_ws/src/BotshareWIP/ROS2/robotui/node_modules/@babel/runtime/helpers/esm/createClass.js\";\nimport _inherits from \"/home/darkadius/ros2_ws/src/BotshareWIP/ROS2/robotui/node_modules/@babel/runtime/helpers/esm/inherits.js\";\nimport _createSuper from \"/home/darkadius/ros2_ws/src/BotshareWIP/ROS2/robotui/node_modules/@babel/runtime/helpers/esm/createSuper.js\";\nimport LightingModel from '../core/LightingModel.js';\nimport F_Schlick from './BSDF/F_Schlick.js';\nimport BRDF_Lambert from './BSDF/BRDF_Lambert.js';\nimport { diffuseColor } from '../core/PropertyNode.js';\nimport { transformedNormalView } from '../accessors/NormalNode.js';\nimport { materialSpecularStrength } from '../accessors/MaterialNode.js';\nimport { shininess, specularColor } from '../core/PropertyNode.js';\nimport { positionViewDirection } from '../accessors/PositionNode.js';\nimport { tslFn, float } from '../shadernode/ShaderNode.js';\nvar G_BlinnPhong_Implicit = function G_BlinnPhong_Implicit() {\n  return float(0.25);\n};\nvar D_BlinnPhong = tslFn(function (_ref) {\n  var dotNH = _ref.dotNH;\n  return shininess.mul(0.5 / Math.PI).add(1.0).mul(dotNH.pow(shininess));\n});\nvar BRDF_BlinnPhong = tslFn(function (_ref2) {\n  var lightDirection = _ref2.lightDirection;\n  var halfDir = lightDirection.add(positionViewDirection).normalize();\n  var dotNH = transformedNormalView.dot(halfDir).clamp();\n  var dotVH = positionViewDirection.dot(halfDir).clamp();\n  var F = F_Schlick({\n    f0: specularColor,\n    f90: 1.0,\n    dotVH: dotVH\n  });\n  var G = G_BlinnPhong_Implicit();\n  var D = D_BlinnPhong({\n    dotNH: dotNH\n  });\n  return F.mul(G).mul(D);\n});\nvar PhongLightingModel = /*#__PURE__*/function (_LightingModel) {\n  _inherits(PhongLightingModel, _LightingModel);\n  var _super = _createSuper(PhongLightingModel);\n  function PhongLightingModel() {\n    var _this;\n    var specular = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : true;\n    _classCallCheck(this, PhongLightingModel);\n    _this = _super.call(this);\n    _this.specular = specular;\n    return _this;\n  }\n  _createClass(PhongLightingModel, [{\n    key: \"direct\",\n    value: function direct(_ref3) {\n      var lightDirection = _ref3.lightDirection,\n        lightColor = _ref3.lightColor,\n        reflectedLight = _ref3.reflectedLight;\n      var dotNL = transformedNormalView.dot(lightDirection).clamp();\n      var irradiance = dotNL.mul(lightColor);\n      reflectedLight.directDiffuse.addAssign(irradiance.mul(BRDF_Lambert({\n        diffuseColor: diffuseColor.rgb\n      })));\n      if (this.specular === true) {\n        reflectedLight.directSpecular.addAssign(irradiance.mul(BRDF_BlinnPhong({\n          lightDirection: lightDirection\n        })).mul(materialSpecularStrength));\n      }\n    }\n  }, {\n    key: \"indirectDiffuse\",\n    value: function indirectDiffuse(_ref4) {\n      var irradiance = _ref4.irradiance,\n        reflectedLight = _ref4.reflectedLight;\n      reflectedLight.indirectDiffuse.addAssign(irradiance.mul(BRDF_Lambert({\n        diffuseColor: diffuseColor\n      })));\n    }\n  }]);\n  return PhongLightingModel;\n}(LightingModel);\nexport default PhongLightingModel;","map":{"version":3,"names":["LightingModel","F_Schlick","BRDF_Lambert","diffuseColor","transformedNormalView","materialSpecularStrength","shininess","specularColor","positionViewDirection","tslFn","float","G_BlinnPhong_Implicit","D_BlinnPhong","_ref","dotNH","mul","Math","PI","add","pow","BRDF_BlinnPhong","_ref2","lightDirection","halfDir","normalize","dot","clamp","dotVH","F","f0","f90","G","D","PhongLightingModel","_LightingModel","_inherits","_super","_createSuper","_this","specular","arguments","length","undefined","_classCallCheck","call","_createClass","key","value","direct","_ref3","lightColor","reflectedLight","dotNL","irradiance","directDiffuse","addAssign","rgb","directSpecular","indirectDiffuse","_ref4"],"sources":["/home/darkadius/ros2_ws/src/BotshareWIP/ROS2/robotui/node_modules/three/examples/jsm/nodes/functions/PhongLightingModel.js"],"sourcesContent":["import LightingModel from '../core/LightingModel.js';\nimport F_Schlick from './BSDF/F_Schlick.js';\nimport BRDF_Lambert from './BSDF/BRDF_Lambert.js';\nimport { diffuseColor } from '../core/PropertyNode.js';\nimport { transformedNormalView } from '../accessors/NormalNode.js';\nimport { materialSpecularStrength } from '../accessors/MaterialNode.js';\nimport { shininess, specularColor } from '../core/PropertyNode.js';\nimport { positionViewDirection } from '../accessors/PositionNode.js';\nimport { tslFn, float } from '../shadernode/ShaderNode.js';\n\nconst G_BlinnPhong_Implicit = () => float( 0.25 );\n\nconst D_BlinnPhong = tslFn( ( { dotNH } ) => {\n\n\treturn shininess.mul( 0.5 / Math.PI ).add( 1.0 ).mul( dotNH.pow( shininess ) );\n\n} );\n\nconst BRDF_BlinnPhong = tslFn( ( { lightDirection } ) => {\n\n\tconst halfDir = lightDirection.add( positionViewDirection ).normalize();\n\n\tconst dotNH = transformedNormalView.dot( halfDir ).clamp();\n\tconst dotVH = positionViewDirection.dot( halfDir ).clamp();\n\n\tconst F = F_Schlick( { f0: specularColor, f90: 1.0, dotVH } );\n\tconst G = G_BlinnPhong_Implicit();\n\tconst D = D_BlinnPhong( { dotNH } );\n\n\treturn F.mul( G ).mul( D );\n\n} );\n\nclass PhongLightingModel extends LightingModel {\n\n\tconstructor( specular = true ) {\n\n\t\tsuper();\n\n\t\tthis.specular = specular;\n\n\t}\n\n\tdirect( { lightDirection, lightColor, reflectedLight } ) {\n\n\t\tconst dotNL = transformedNormalView.dot( lightDirection ).clamp();\n\t\tconst irradiance = dotNL.mul( lightColor );\n\n\t\treflectedLight.directDiffuse.addAssign( irradiance.mul( BRDF_Lambert( { diffuseColor: diffuseColor.rgb } ) ) );\n\n\t\tif ( this.specular === true ) {\n\n\t\t\treflectedLight.directSpecular.addAssign( irradiance.mul( BRDF_BlinnPhong( { lightDirection } ) ).mul( materialSpecularStrength ) );\n\n\t\t}\n\n\t}\n\n\tindirectDiffuse( { irradiance, reflectedLight } ) {\n\n\t\treflectedLight.indirectDiffuse.addAssign( irradiance.mul( BRDF_Lambert( { diffuseColor } ) ) );\n\n\t}\n\n}\n\nexport default PhongLightingModel;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}