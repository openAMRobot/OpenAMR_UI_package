{"ast":null,"code":"import _createForOfIteratorHelper from \"/home/darkadius/ros2_ws/src/BotshareWIP/ROS2/robotui/node_modules/@babel/runtime/helpers/esm/createForOfIteratorHelper.js\";\nimport _classCallCheck from \"/home/darkadius/ros2_ws/src/BotshareWIP/ROS2/robotui/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";\nimport _createClass from \"/home/darkadius/ros2_ws/src/BotshareWIP/ROS2/robotui/node_modules/@babel/runtime/helpers/esm/createClass.js\";\nimport _get from \"/home/darkadius/ros2_ws/src/BotshareWIP/ROS2/robotui/node_modules/@babel/runtime/helpers/esm/get.js\";\nimport _getPrototypeOf from \"/home/darkadius/ros2_ws/src/BotshareWIP/ROS2/robotui/node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js\";\nimport _inherits from \"/home/darkadius/ros2_ws/src/BotshareWIP/ROS2/robotui/node_modules/@babel/runtime/helpers/esm/inherits.js\";\nimport _createSuper from \"/home/darkadius/ros2_ws/src/BotshareWIP/ROS2/robotui/node_modules/@babel/runtime/helpers/esm/createSuper.js\";\nimport CodeNode from './CodeNode.js';\nimport { addNodeClass } from '../core/Node.js';\nimport { nodeObject } from '../shadernode/ShaderNode.js';\nvar FunctionNode = /*#__PURE__*/function (_CodeNode) {\n  _inherits(FunctionNode, _CodeNode);\n  var _super = _createSuper(FunctionNode);\n  function FunctionNode() {\n    var _this;\n    var code = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : '';\n    var includes = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : [];\n    var language = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : '';\n    _classCallCheck(this, FunctionNode);\n    _this = _super.call(this, code, includes, language);\n    _this.keywords = {};\n    return _this;\n  }\n  _createClass(FunctionNode, [{\n    key: \"getNodeType\",\n    value: function getNodeType(builder) {\n      return this.getNodeFunction(builder).type;\n    }\n  }, {\n    key: \"getInputs\",\n    value: function getInputs(builder) {\n      return this.getNodeFunction(builder).inputs;\n    }\n  }, {\n    key: \"getNodeFunction\",\n    value: function getNodeFunction(builder) {\n      var nodeData = builder.getDataFromNode(this);\n      var nodeFunction = nodeData.nodeFunction;\n      if (nodeFunction === undefined) {\n        nodeFunction = builder.parser.parseFunction(this.code);\n        nodeData.nodeFunction = nodeFunction;\n      }\n      return nodeFunction;\n    }\n  }, {\n    key: \"generate\",\n    value: function generate(builder, output) {\n      _get(_getPrototypeOf(FunctionNode.prototype), \"generate\", this).call(this, builder);\n      var nodeFunction = this.getNodeFunction(builder);\n      var name = nodeFunction.name;\n      var type = nodeFunction.type;\n      var nodeCode = builder.getCodeFromNode(this, type);\n      if (name !== '') {\n        // use a custom property name\n\n        nodeCode.name = name;\n      }\n      var propertyName = builder.getPropertyName(nodeCode);\n      var code = this.getNodeFunction(builder).getCode(propertyName);\n      var keywords = this.keywords;\n      var keywordsProperties = Object.keys(keywords);\n      if (keywordsProperties.length > 0) {\n        var _iterator = _createForOfIteratorHelper(keywordsProperties),\n          _step;\n        try {\n          for (_iterator.s(); !(_step = _iterator.n()).done;) {\n            var property = _step.value;\n            var propertyRegExp = new RegExp(\"\\\\b\".concat(property, \"\\\\b\"), 'g');\n            var nodeProperty = keywords[property].build(builder, 'property');\n            code = code.replace(propertyRegExp, nodeProperty);\n          }\n        } catch (err) {\n          _iterator.e(err);\n        } finally {\n          _iterator.f();\n        }\n      }\n      nodeCode.code = code;\n      if (output === 'property') {\n        return propertyName;\n      } else {\n        return builder.format(\"\".concat(propertyName, \"()\"), type, output);\n      }\n    }\n  }]);\n  return FunctionNode;\n}(CodeNode);\nexport default FunctionNode;\nvar nativeFn = function nativeFn(code) {\n  var includes = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : [];\n  var language = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : '';\n  for (var i = 0; i < includes.length; i++) {\n    var include = includes[i];\n\n    // TSL Function: glslFn, wgslFn\n\n    if (typeof include === 'function') {\n      includes[i] = include.functionNode;\n    }\n  }\n  var functionNode = nodeObject(new FunctionNode(code, includes, language));\n  var fn = function fn() {\n    return functionNode.call.apply(functionNode, arguments);\n  };\n  fn.functionNode = functionNode;\n  return fn;\n};\nexport var glslFn = function glslFn(code, includes) {\n  return nativeFn(code, includes, 'glsl');\n};\nexport var wgslFn = function wgslFn(code, includes) {\n  return nativeFn(code, includes, 'wgsl');\n};\nexport var func = function func(code, includes) {\n  // @deprecated, r154\n\n  console.warn('TSL: func() is deprecated. Use nativeFn(), wgslFn() or glslFn() instead.');\n  return nodeObject(new FunctionNode(code, includes));\n};\naddNodeClass('FunctionNode', FunctionNode);","map":{"version":3,"names":["CodeNode","addNodeClass","nodeObject","FunctionNode","_CodeNode","_inherits","_super","_createSuper","_this","code","arguments","length","undefined","includes","language","_classCallCheck","call","keywords","_createClass","key","value","getNodeType","builder","getNodeFunction","type","getInputs","inputs","nodeData","getDataFromNode","nodeFunction","parser","parseFunction","generate","output","_get","_getPrototypeOf","prototype","name","nodeCode","getCodeFromNode","propertyName","getPropertyName","getCode","keywordsProperties","Object","keys","_iterator","_createForOfIteratorHelper","_step","s","n","done","property","propertyRegExp","RegExp","concat","nodeProperty","build","replace","err","e","f","format","nativeFn","i","include","functionNode","fn","apply","glslFn","wgslFn","func","console","warn"],"sources":["/home/darkadius/ros2_ws/src/BotshareWIP/ROS2/robotui/node_modules/three/examples/jsm/nodes/code/FunctionNode.js"],"sourcesContent":["import CodeNode from './CodeNode.js';\nimport { addNodeClass } from '../core/Node.js';\nimport { nodeObject } from '../shadernode/ShaderNode.js';\n\nclass FunctionNode extends CodeNode {\n\n\tconstructor( code = '', includes = [], language = '' ) {\n\n\t\tsuper( code, includes, language );\n\n\t\tthis.keywords = {};\n\n\t}\n\n\tgetNodeType( builder ) {\n\n\t\treturn this.getNodeFunction( builder ).type;\n\n\t}\n\n\tgetInputs( builder ) {\n\n\t\treturn this.getNodeFunction( builder ).inputs;\n\n\t}\n\n\tgetNodeFunction( builder ) {\n\n\t\tconst nodeData = builder.getDataFromNode( this );\n\n\t\tlet nodeFunction = nodeData.nodeFunction;\n\n\t\tif ( nodeFunction === undefined ) {\n\n\t\t\tnodeFunction = builder.parser.parseFunction( this.code );\n\n\t\t\tnodeData.nodeFunction = nodeFunction;\n\n\t\t}\n\n\t\treturn nodeFunction;\n\n\t}\n\n\tgenerate( builder, output ) {\n\n\t\tsuper.generate( builder );\n\n\t\tconst nodeFunction = this.getNodeFunction( builder );\n\n\t\tconst name = nodeFunction.name;\n\t\tconst type = nodeFunction.type;\n\n\t\tconst nodeCode = builder.getCodeFromNode( this, type );\n\n\t\tif ( name !== '' ) {\n\n\t\t\t// use a custom property name\n\n\t\t\tnodeCode.name = name;\n\n\t\t}\n\n\t\tconst propertyName = builder.getPropertyName( nodeCode );\n\n\t\tlet code = this.getNodeFunction( builder ).getCode( propertyName );\n\n\t\tconst keywords = this.keywords;\n\t\tconst keywordsProperties = Object.keys( keywords );\n\n\t\tif ( keywordsProperties.length > 0 ) {\n\n\t\t\tfor ( const property of keywordsProperties ) {\n\n\t\t\t\tconst propertyRegExp = new RegExp( `\\\\b${property}\\\\b`, 'g' );\n\t\t\t\tconst nodeProperty = keywords[ property ].build( builder, 'property' );\n\n\t\t\t\tcode = code.replace( propertyRegExp, nodeProperty );\n\n\t\t\t}\n\n\t\t}\n\n\t\tnodeCode.code = code;\n\n\t\tif ( output === 'property' ) {\n\n\t\t\treturn propertyName;\n\n\t\t} else {\n\n\t\t\treturn builder.format( `${ propertyName }()`, type, output );\n\n\t\t}\n\n\t}\n\n}\n\nexport default FunctionNode;\n\nconst nativeFn = ( code, includes = [], language = '' ) => {\n\n\tfor ( let i = 0; i < includes.length; i ++ ) {\n\n\t\tconst include = includes[ i ];\n\n\t\t// TSL Function: glslFn, wgslFn\n\n\t\tif ( typeof include === 'function' ) {\n\n\t\t\tincludes[ i ] = include.functionNode;\n\n\t\t}\n\n\t}\n\n\tconst functionNode = nodeObject( new FunctionNode( code, includes, language ) );\n\n\tconst fn = ( ...params ) => functionNode.call( ...params );\n\tfn.functionNode = functionNode;\n\n\treturn fn;\n\n};\n\nexport const glslFn = ( code, includes ) => nativeFn( code, includes, 'glsl' );\nexport const wgslFn = ( code, includes ) => nativeFn( code, includes, 'wgsl' );\n\nexport const func = ( code, includes ) => { // @deprecated, r154\n\n\tconsole.warn( 'TSL: func() is deprecated. Use nativeFn(), wgslFn() or glslFn() instead.' );\n\n\treturn nodeObject( new FunctionNode( code, includes ) );\n\n};\n\naddNodeClass( 'FunctionNode', FunctionNode );\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}