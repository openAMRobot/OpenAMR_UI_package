{"ast":null,"code":"import _classCallCheck from \"/home/darkadius/ros2_ws/src/BotshareWIP/ROS2/robotui/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";\nimport _createClass from \"/home/darkadius/ros2_ws/src/BotshareWIP/ROS2/robotui/node_modules/@babel/runtime/helpers/esm/createClass.js\";\nimport _get from \"/home/darkadius/ros2_ws/src/BotshareWIP/ROS2/robotui/node_modules/@babel/runtime/helpers/esm/get.js\";\nimport _getPrototypeOf from \"/home/darkadius/ros2_ws/src/BotshareWIP/ROS2/robotui/node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js\";\nimport _inherits from \"/home/darkadius/ros2_ws/src/BotshareWIP/ROS2/robotui/node_modules/@babel/runtime/helpers/esm/inherits.js\";\nimport _createSuper from \"/home/darkadius/ros2_ws/src/BotshareWIP/ROS2/robotui/node_modules/@babel/runtime/helpers/esm/createSuper.js\";\nimport AnalyticLightNode from './AnalyticLightNode.js';\nimport { addLightNode } from './LightsNode.js';\nimport { getDistanceAttenuation } from './LightUtils.js';\nimport { uniform } from '../core/UniformNode.js';\nimport { objectViewPosition } from '../accessors/Object3DNode.js';\nimport { positionView } from '../accessors/PositionNode.js';\nimport { addNodeClass } from '../core/Node.js';\nimport { PointLight } from 'three';\nvar PointLightNode = /*#__PURE__*/function (_AnalyticLightNode) {\n  _inherits(PointLightNode, _AnalyticLightNode);\n  var _super = _createSuper(PointLightNode);\n  function PointLightNode() {\n    var _this;\n    var light = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : null;\n    _classCallCheck(this, PointLightNode);\n    _this = _super.call(this, light);\n    _this.cutoffDistanceNode = uniform(0);\n    _this.decayExponentNode = uniform(0);\n    return _this;\n  }\n  _createClass(PointLightNode, [{\n    key: \"update\",\n    value: function update(frame) {\n      var light = this.light;\n      _get(_getPrototypeOf(PointLightNode.prototype), \"update\", this).call(this, frame);\n      this.cutoffDistanceNode.value = light.distance;\n      this.decayExponentNode.value = light.decay;\n    }\n  }, {\n    key: \"setup\",\n    value: function setup(builder) {\n      var colorNode = this.colorNode,\n        cutoffDistanceNode = this.cutoffDistanceNode,\n        decayExponentNode = this.decayExponentNode,\n        light = this.light;\n      var lightingModel = builder.context.lightingModel;\n      var lVector = objectViewPosition(light).sub(positionView); // @TODO: Add it into LightNode\n\n      var lightDirection = lVector.normalize();\n      var lightDistance = lVector.length();\n      var lightAttenuation = getDistanceAttenuation({\n        lightDistance: lightDistance,\n        cutoffDistance: cutoffDistanceNode,\n        decayExponent: decayExponentNode\n      });\n      var lightColor = colorNode.mul(lightAttenuation);\n      var reflectedLight = builder.context.reflectedLight;\n      lightingModel.direct({\n        lightDirection: lightDirection,\n        lightColor: lightColor,\n        reflectedLight: reflectedLight\n      });\n    }\n  }]);\n  return PointLightNode;\n}(AnalyticLightNode);\nexport default PointLightNode;\naddNodeClass('PointLightNode', PointLightNode);\naddLightNode(PointLight, PointLightNode);","map":{"version":3,"names":["AnalyticLightNode","addLightNode","getDistanceAttenuation","uniform","objectViewPosition","positionView","addNodeClass","PointLight","PointLightNode","_AnalyticLightNode","_inherits","_super","_createSuper","_this","light","arguments","length","undefined","_classCallCheck","call","cutoffDistanceNode","decayExponentNode","_createClass","key","value","update","frame","_get","_getPrototypeOf","prototype","distance","decay","setup","builder","colorNode","lightingModel","context","lVector","sub","lightDirection","normalize","lightDistance","lightAttenuation","cutoffDistance","decayExponent","lightColor","mul","reflectedLight","direct"],"sources":["/home/darkadius/ros2_ws/src/BotshareWIP/ROS2/robotui/node_modules/three/examples/jsm/nodes/lighting/PointLightNode.js"],"sourcesContent":["import AnalyticLightNode from './AnalyticLightNode.js';\nimport { addLightNode } from './LightsNode.js';\nimport { getDistanceAttenuation } from './LightUtils.js';\nimport { uniform } from '../core/UniformNode.js';\nimport { objectViewPosition } from '../accessors/Object3DNode.js';\nimport { positionView } from '../accessors/PositionNode.js';\nimport { addNodeClass } from '../core/Node.js';\n\nimport { PointLight } from 'three';\n\nclass PointLightNode extends AnalyticLightNode {\n\n\tconstructor( light = null ) {\n\n\t\tsuper( light );\n\n\t\tthis.cutoffDistanceNode = uniform( 0 );\n\t\tthis.decayExponentNode = uniform( 0 );\n\n\t}\n\n\tupdate( frame ) {\n\n\t\tconst { light } = this;\n\n\t\tsuper.update( frame );\n\n\t\tthis.cutoffDistanceNode.value = light.distance;\n\t\tthis.decayExponentNode.value = light.decay;\n\n\t}\n\n\tsetup( builder ) {\n\n\t\tconst { colorNode, cutoffDistanceNode, decayExponentNode, light } = this;\n\n\t\tconst lightingModel = builder.context.lightingModel;\n\n\t\tconst lVector = objectViewPosition( light ).sub( positionView ); // @TODO: Add it into LightNode\n\n\t\tconst lightDirection = lVector.normalize();\n\t\tconst lightDistance = lVector.length();\n\n\t\tconst lightAttenuation = getDistanceAttenuation( {\n\t\t\tlightDistance,\n\t\t\tcutoffDistance: cutoffDistanceNode,\n\t\t\tdecayExponent: decayExponentNode\n\t\t} );\n\n\t\tconst lightColor = colorNode.mul( lightAttenuation );\n\n\t\tconst reflectedLight = builder.context.reflectedLight;\n\n\t\tlightingModel.direct( {\n\t\t\tlightDirection,\n\t\t\tlightColor,\n\t\t\treflectedLight\n\t\t} );\n\n\t}\n\n}\n\nexport default PointLightNode;\n\naddNodeClass( 'PointLightNode', PointLightNode );\n\naddLightNode( PointLight, PointLightNode );\n"],"mappings":";;;;;;AAAA,OAAOA,iBAAiB,MAAM,wBAAwB;AACtD,SAASC,YAAY,QAAQ,iBAAiB;AAC9C,SAASC,sBAAsB,QAAQ,iBAAiB;AACxD,SAASC,OAAO,QAAQ,wBAAwB;AAChD,SAASC,kBAAkB,QAAQ,8BAA8B;AACjE,SAASC,YAAY,QAAQ,8BAA8B;AAC3D,SAASC,YAAY,QAAQ,iBAAiB;AAE9C,SAASC,UAAU,QAAQ,OAAO;AAAC,IAE7BC,cAAc,0BAAAC,kBAAA;EAAAC,SAAA,CAAAF,cAAA,EAAAC,kBAAA;EAAA,IAAAE,MAAA,GAAAC,YAAA,CAAAJ,cAAA;EAEnB,SAAAA,eAAA,EAA4B;IAAA,IAAAK,KAAA;IAAA,IAAfC,KAAK,GAAAC,SAAA,CAAAC,MAAA,QAAAD,SAAA,QAAAE,SAAA,GAAAF,SAAA,MAAG,IAAI;IAAAG,eAAA,OAAAV,cAAA;IAExBK,KAAA,GAAAF,MAAA,CAAAQ,IAAA,OAAOL,KAAK;IAEZD,KAAA,CAAKO,kBAAkB,GAAGjB,OAAO,CAAE,CAAE,CAAC;IACtCU,KAAA,CAAKQ,iBAAiB,GAAGlB,OAAO,CAAE,CAAE,CAAC;IAAC,OAAAU,KAAA;EAEvC;EAACS,YAAA,CAAAd,cAAA;IAAAe,GAAA;IAAAC,KAAA,EAED,SAAAC,OAAQC,KAAK,EAAG;MAEf,IAAQZ,KAAK,GAAK,IAAI,CAAdA,KAAK;MAEba,IAAA,CAAAC,eAAA,CAAApB,cAAA,CAAAqB,SAAA,mBAAAV,IAAA,OAAcO,KAAK;MAEnB,IAAI,CAACN,kBAAkB,CAACI,KAAK,GAAGV,KAAK,CAACgB,QAAQ;MAC9C,IAAI,CAACT,iBAAiB,CAACG,KAAK,GAAGV,KAAK,CAACiB,KAAK;IAE3C;EAAC;IAAAR,GAAA;IAAAC,KAAA,EAED,SAAAQ,MAAOC,OAAO,EAAG;MAEhB,IAAQC,SAAS,GAAmD,IAAI,CAAhEA,SAAS;QAAEd,kBAAkB,GAA+B,IAAI,CAArDA,kBAAkB;QAAEC,iBAAiB,GAAY,IAAI,CAAjCA,iBAAiB;QAAEP,KAAK,GAAK,IAAI,CAAdA,KAAK;MAE/D,IAAMqB,aAAa,GAAGF,OAAO,CAACG,OAAO,CAACD,aAAa;MAEnD,IAAME,OAAO,GAAGjC,kBAAkB,CAAEU,KAAM,CAAC,CAACwB,GAAG,CAAEjC,YAAa,CAAC,CAAC,CAAC;;MAEjE,IAAMkC,cAAc,GAAGF,OAAO,CAACG,SAAS,CAAC,CAAC;MAC1C,IAAMC,aAAa,GAAGJ,OAAO,CAACrB,MAAM,CAAC,CAAC;MAEtC,IAAM0B,gBAAgB,GAAGxC,sBAAsB,CAAE;QAChDuC,aAAa,EAAbA,aAAa;QACbE,cAAc,EAAEvB,kBAAkB;QAClCwB,aAAa,EAAEvB;MAChB,CAAE,CAAC;MAEH,IAAMwB,UAAU,GAAGX,SAAS,CAACY,GAAG,CAAEJ,gBAAiB,CAAC;MAEpD,IAAMK,cAAc,GAAGd,OAAO,CAACG,OAAO,CAACW,cAAc;MAErDZ,aAAa,CAACa,MAAM,CAAE;QACrBT,cAAc,EAAdA,cAAc;QACdM,UAAU,EAAVA,UAAU;QACVE,cAAc,EAAdA;MACD,CAAE,CAAC;IAEJ;EAAC;EAAA,OAAAvC,cAAA;AAAA,EAjD2BR,iBAAiB;AAqD9C,eAAeQ,cAAc;AAE7BF,YAAY,CAAE,gBAAgB,EAAEE,cAAe,CAAC;AAEhDP,YAAY,CAAEM,UAAU,EAAEC,cAAe,CAAC"},"metadata":{},"sourceType":"module","externalDependencies":[]}