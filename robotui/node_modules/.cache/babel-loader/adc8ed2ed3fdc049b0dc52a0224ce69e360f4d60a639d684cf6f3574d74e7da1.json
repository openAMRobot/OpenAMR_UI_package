{"ast":null,"code":"import _classCallCheck from \"/home/darkadius/ros2_ws/src/BotshareWIP/ROS2/robotui/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";\nimport _createClass from \"/home/darkadius/ros2_ws/src/BotshareWIP/ROS2/robotui/node_modules/@babel/runtime/helpers/esm/createClass.js\";\nimport _inherits from \"/home/darkadius/ros2_ws/src/BotshareWIP/ROS2/robotui/node_modules/@babel/runtime/helpers/esm/inherits.js\";\nimport _createSuper from \"/home/darkadius/ros2_ws/src/BotshareWIP/ROS2/robotui/node_modules/@babel/runtime/helpers/esm/createSuper.js\";\nimport InputNode from '../core/InputNode.js';\nimport { addNodeClass } from '../core/Node.js';\nimport { varying } from '../core/VaryingNode.js';\nimport { nodeObject, addNodeElement } from '../shadernode/ShaderNode.js';\nimport { InterleavedBufferAttribute, InterleavedBuffer, StaticDrawUsage, DynamicDrawUsage } from 'three';\nvar BufferAttributeNode = /*#__PURE__*/function (_InputNode) {\n  _inherits(BufferAttributeNode, _InputNode);\n  var _super = _createSuper(BufferAttributeNode);\n  function BufferAttributeNode(value) {\n    var _this;\n    var bufferType = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : null;\n    var bufferStride = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 0;\n    var bufferOffset = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : 0;\n    _classCallCheck(this, BufferAttributeNode);\n    _this = _super.call(this, value, bufferType);\n    _this.isBufferNode = true;\n    _this.bufferType = bufferType;\n    _this.bufferStride = bufferStride;\n    _this.bufferOffset = bufferOffset;\n    _this.usage = StaticDrawUsage;\n    _this.instanced = false;\n    _this.attribute = null;\n    if (value && value.isBufferAttribute === true) {\n      _this.attribute = value;\n      _this.usage = value.usage;\n      _this.instanced = value.isInstancedBufferAttribute;\n    }\n    return _this;\n  }\n  _createClass(BufferAttributeNode, [{\n    key: \"getNodeType\",\n    value: function getNodeType(builder) {\n      if (this.bufferType === null) {\n        this.bufferType = builder.getTypeFromAttribute(this.attribute);\n      }\n      return this.bufferType;\n    }\n  }, {\n    key: \"setup\",\n    value: function setup(builder) {\n      if (this.attribute !== null) return;\n      var type = this.getNodeType(builder);\n      var array = this.value;\n      var itemSize = builder.getTypeLength(type);\n      var stride = this.bufferStride || itemSize;\n      var offset = this.bufferOffset;\n      var buffer = array.isInterleavedBuffer === true ? array : new InterleavedBuffer(array, stride);\n      var bufferAttribute = new InterleavedBufferAttribute(buffer, itemSize, offset);\n      buffer.setUsage(this.usage);\n      this.attribute = bufferAttribute;\n      this.attribute.isInstancedBufferAttribute = this.instanced; // @TODO: Add a possible: InstancedInterleavedBufferAttribute\n    }\n  }, {\n    key: \"generate\",\n    value: function generate(builder) {\n      var nodeType = this.getNodeType(builder);\n      var nodeUniform = builder.getBufferAttributeFromNode(this, nodeType);\n      var propertyName = builder.getPropertyName(nodeUniform);\n      var output = null;\n      if (builder.shaderStage === 'vertex') {\n        output = propertyName;\n      } else {\n        var nodeVarying = varying(this);\n        output = nodeVarying.build(builder, nodeType);\n      }\n      return output;\n    }\n  }, {\n    key: \"getInputType\",\n    value: function getInputType( /*builder*/\n    ) {\n      return 'bufferAttribute';\n    }\n  }, {\n    key: \"setUsage\",\n    value: function setUsage(value) {\n      this.usage = value;\n      return this;\n    }\n  }, {\n    key: \"setInstanced\",\n    value: function setInstanced(value) {\n      this.instanced = value;\n      return this;\n    }\n  }]);\n  return BufferAttributeNode;\n}(InputNode);\nexport default BufferAttributeNode;\nexport var bufferAttribute = function bufferAttribute(array, type, stride, offset) {\n  return nodeObject(new BufferAttributeNode(array, type, stride, offset));\n};\nexport var dynamicBufferAttribute = function dynamicBufferAttribute(array, type, stride, offset) {\n  return bufferAttribute(array, type, stride, offset).setUsage(DynamicDrawUsage);\n};\nexport var instancedBufferAttribute = function instancedBufferAttribute(array, type, stride, offset) {\n  return bufferAttribute(array, type, stride, offset).setInstanced(true);\n};\nexport var instancedDynamicBufferAttribute = function instancedDynamicBufferAttribute(array, type, stride, offset) {\n  return dynamicBufferAttribute(array, type, stride, offset).setInstanced(true);\n};\naddNodeElement('toAttribute', function (bufferNode) {\n  return bufferAttribute(bufferNode.value);\n});\naddNodeClass('BufferAttributeNode', BufferAttributeNode);","map":{"version":3,"names":["InputNode","addNodeClass","varying","nodeObject","addNodeElement","InterleavedBufferAttribute","InterleavedBuffer","StaticDrawUsage","DynamicDrawUsage","BufferAttributeNode","_InputNode","_inherits","_super","_createSuper","value","_this","bufferType","arguments","length","undefined","bufferStride","bufferOffset","_classCallCheck","call","isBufferNode","usage","instanced","attribute","isBufferAttribute","isInstancedBufferAttribute","_createClass","key","getNodeType","builder","getTypeFromAttribute","setup","type","array","itemSize","getTypeLength","stride","offset","buffer","isInterleavedBuffer","bufferAttribute","setUsage","generate","nodeType","nodeUniform","getBufferAttributeFromNode","propertyName","getPropertyName","output","shaderStage","nodeVarying","build","getInputType","setInstanced","dynamicBufferAttribute","instancedBufferAttribute","instancedDynamicBufferAttribute","bufferNode"],"sources":["/home/darkadius/ros2_ws/src/BotshareWIP/ROS2/robotui/node_modules/three/examples/jsm/nodes/accessors/BufferAttributeNode.js"],"sourcesContent":["import InputNode from '../core/InputNode.js';\nimport { addNodeClass } from '../core/Node.js';\nimport { varying } from '../core/VaryingNode.js';\nimport { nodeObject, addNodeElement } from '../shadernode/ShaderNode.js';\nimport { InterleavedBufferAttribute, InterleavedBuffer, StaticDrawUsage, DynamicDrawUsage } from 'three';\n\nclass BufferAttributeNode extends InputNode {\n\n\tconstructor( value, bufferType = null, bufferStride = 0, bufferOffset = 0 ) {\n\n\t\tsuper( value, bufferType );\n\n\t\tthis.isBufferNode = true;\n\n\t\tthis.bufferType = bufferType;\n\t\tthis.bufferStride = bufferStride;\n\t\tthis.bufferOffset = bufferOffset;\n\n\t\tthis.usage = StaticDrawUsage;\n\t\tthis.instanced = false;\n\n\t\tthis.attribute = null;\n\n\t\tif ( value && value.isBufferAttribute === true ) {\n\n\t\t\tthis.attribute = value;\n\t\t\tthis.usage = value.usage;\n\t\t\tthis.instanced = value.isInstancedBufferAttribute;\n\n\t\t}\n\n\t}\n\n\tgetNodeType( builder ) {\n\n\t\tif ( this.bufferType === null ) {\n\n\t\t\tthis.bufferType = builder.getTypeFromAttribute( this.attribute );\n\n\t\t}\n\n\t\treturn this.bufferType;\n\n\t}\n\n\tsetup( builder ) {\n\n\t\tif ( this.attribute !== null ) return;\n\n\t\tconst type = this.getNodeType( builder );\n\t\tconst array = this.value;\n\t\tconst itemSize = builder.getTypeLength( type );\n\t\tconst stride = this.bufferStride || itemSize;\n\t\tconst offset = this.bufferOffset;\n\n\t\tconst buffer = array.isInterleavedBuffer === true ? array : new InterleavedBuffer( array, stride );\n\t\tconst bufferAttribute = new InterleavedBufferAttribute( buffer, itemSize, offset );\n\n\t\tbuffer.setUsage( this.usage );\n\n\t\tthis.attribute = bufferAttribute;\n\t\tthis.attribute.isInstancedBufferAttribute = this.instanced; // @TODO: Add a possible: InstancedInterleavedBufferAttribute\n\n\t}\n\n\tgenerate( builder ) {\n\n\t\tconst nodeType = this.getNodeType( builder );\n\n\t\tconst nodeUniform = builder.getBufferAttributeFromNode( this, nodeType );\n\t\tconst propertyName = builder.getPropertyName( nodeUniform );\n\n\t\tlet output = null;\n\n\t\tif ( builder.shaderStage === 'vertex' ) {\n\n\t\t\toutput = propertyName;\n\n\t\t} else {\n\n\t\t\tconst nodeVarying = varying( this );\n\n\t\t\toutput = nodeVarying.build( builder, nodeType );\n\n\t\t}\n\n\t\treturn output;\n\n\t}\n\n\tgetInputType( /*builder*/ ) {\n\n\t\treturn 'bufferAttribute';\n\n\t}\n\n\tsetUsage( value ) {\n\n\t\tthis.usage = value;\n\n\t\treturn this;\n\n\t}\n\n\tsetInstanced( value ) {\n\n\t\tthis.instanced = value;\n\n\t\treturn this;\n\n\t}\n\n}\n\nexport default BufferAttributeNode;\n\nexport const bufferAttribute = ( array, type, stride, offset ) => nodeObject( new BufferAttributeNode( array, type, stride, offset ) );\nexport const dynamicBufferAttribute = ( array, type, stride, offset ) => bufferAttribute( array, type, stride, offset ).setUsage( DynamicDrawUsage );\n\nexport const instancedBufferAttribute = ( array, type, stride, offset ) => bufferAttribute( array, type, stride, offset ).setInstanced( true );\nexport const instancedDynamicBufferAttribute = ( array, type, stride, offset ) => dynamicBufferAttribute( array, type, stride, offset ).setInstanced( true );\n\naddNodeElement( 'toAttribute', ( bufferNode ) => bufferAttribute( bufferNode.value ) );\n\naddNodeClass( 'BufferAttributeNode', BufferAttributeNode );\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}