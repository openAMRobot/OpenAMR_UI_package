{"ast":null,"code":"import _regeneratorRuntime from \"/home/darkadius/ros2_ws/src/BotshareWIP/ROS2/robotui/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";\nimport _createForOfIteratorHelper from \"/home/darkadius/ros2_ws/src/BotshareWIP/ROS2/robotui/node_modules/@babel/runtime/helpers/esm/createForOfIteratorHelper.js\";\nimport _classCallCheck from \"/home/darkadius/ros2_ws/src/BotshareWIP/ROS2/robotui/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";\nimport _createClass from \"/home/darkadius/ros2_ws/src/BotshareWIP/ROS2/robotui/node_modules/@babel/runtime/helpers/esm/createClass.js\";\nimport _assertThisInitialized from \"/home/darkadius/ros2_ws/src/BotshareWIP/ROS2/robotui/node_modules/@babel/runtime/helpers/esm/assertThisInitialized.js\";\nimport _inherits from \"/home/darkadius/ros2_ws/src/BotshareWIP/ROS2/robotui/node_modules/@babel/runtime/helpers/esm/inherits.js\";\nimport _createSuper from \"/home/darkadius/ros2_ws/src/BotshareWIP/ROS2/robotui/node_modules/@babel/runtime/helpers/esm/createSuper.js\";\nimport { EventDispatcher } from 'three';\nimport { NodeUpdateType } from './constants.js';\nimport { getNodeChildren, getCacheKey as _getCacheKey } from './NodeUtils.js';\nimport { MathUtils } from 'three';\nvar NodeClasses = new Map();\nvar _nodeId = 0;\nvar Node = /*#__PURE__*/function (_EventDispatcher) {\n  _inherits(Node, _EventDispatcher);\n  var _super = _createSuper(Node);\n  function Node() {\n    var _this;\n    var nodeType = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : null;\n    _classCallCheck(this, Node);\n    _this = _super.call(this);\n    _this.nodeType = nodeType;\n    _this.updateType = NodeUpdateType.NONE;\n    _this.updateBeforeType = NodeUpdateType.NONE;\n    _this.uuid = MathUtils.generateUUID();\n    _this.isNode = true;\n    Object.defineProperty(_assertThisInitialized(_this), 'id', {\n      value: _nodeId++\n    });\n    return _this;\n  }\n  _createClass(Node, [{\n    key: \"type\",\n    get: function get() {\n      return this.constructor.type;\n    }\n  }, {\n    key: \"getSelf\",\n    value: function getSelf() {\n      // Returns non-node object.\n\n      return this.self || this;\n    }\n  }, {\n    key: \"updateReference\",\n    value: function updateReference() {\n      return this;\n    }\n  }, {\n    key: \"isGlobal\",\n    value: function isGlobal( /*builder*/\n    ) {\n      return false;\n    }\n  }, {\n    key: \"getChildren\",\n    value: /*#__PURE__*/_regeneratorRuntime().mark(function getChildren() {\n      var self, _iterator, _step, _loop;\n      return _regeneratorRuntime().wrap(function getChildren$(_context2) {\n        while (1) switch (_context2.prev = _context2.next) {\n          case 0:\n            self = this;\n            _iterator = _createForOfIteratorHelper(getNodeChildren(this));\n            _context2.prev = 2;\n            _loop = /*#__PURE__*/_regeneratorRuntime().mark(function _loop() {\n              var _step$value, property, index, childNode;\n              return _regeneratorRuntime().wrap(function _loop$(_context) {\n                while (1) switch (_context.prev = _context.next) {\n                  case 0:\n                    _step$value = _step.value, property = _step$value.property, index = _step$value.index, childNode = _step$value.childNode;\n                    _context.next = 3;\n                    return {\n                      childNode: childNode,\n                      replaceNode: function replaceNode(node) {\n                        if (index === undefined) self[property] = node;else self[property][index] = node;\n                      }\n                    };\n                  case 3:\n                  case \"end\":\n                    return _context.stop();\n                }\n              }, _loop);\n            });\n            _iterator.s();\n          case 5:\n            if ((_step = _iterator.n()).done) {\n              _context2.next = 9;\n              break;\n            }\n            return _context2.delegateYield(_loop(), \"t0\", 7);\n          case 7:\n            _context2.next = 5;\n            break;\n          case 9:\n            _context2.next = 14;\n            break;\n          case 11:\n            _context2.prev = 11;\n            _context2.t1 = _context2[\"catch\"](2);\n            _iterator.e(_context2.t1);\n          case 14:\n            _context2.prev = 14;\n            _iterator.f();\n            return _context2.finish(14);\n          case 17:\n          case \"end\":\n            return _context2.stop();\n        }\n      }, getChildren, this, [[2, 11, 14, 17]]);\n    })\n  }, {\n    key: \"dispose\",\n    value: function dispose() {\n      this.dispatchEvent({\n        type: 'dispose'\n      });\n    }\n  }, {\n    key: \"traverse\",\n    value: function traverse(callback) {\n      var replaceNode = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : null;\n      callback(this, replaceNode);\n      var _iterator2 = _createForOfIteratorHelper(this.getChildren()),\n        _step2;\n      try {\n        for (_iterator2.s(); !(_step2 = _iterator2.n()).done;) {\n          var _step2$value = _step2.value,\n            childNode = _step2$value.childNode,\n            _replaceNode = _step2$value.replaceNode;\n          childNode.traverse(callback, _replaceNode);\n        }\n      } catch (err) {\n        _iterator2.e(err);\n      } finally {\n        _iterator2.f();\n      }\n    }\n  }, {\n    key: \"getCacheKey\",\n    value: function getCacheKey() {\n      return _getCacheKey(this);\n    }\n  }, {\n    key: \"getHash\",\n    value: function getHash( /*builder*/\n    ) {\n      return this.uuid;\n    }\n  }, {\n    key: \"getUpdateType\",\n    value: function getUpdateType() {\n      return this.updateType;\n    }\n  }, {\n    key: \"getUpdateBeforeType\",\n    value: function getUpdateBeforeType() {\n      return this.updateBeforeType;\n    }\n  }, {\n    key: \"getNodeType\",\n    value: function getNodeType(builder) {\n      var nodeProperties = builder.getNodeProperties(this);\n      if (nodeProperties.outputNode) {\n        return nodeProperties.outputNode.getNodeType(builder);\n      }\n      return this.nodeType;\n    }\n  }, {\n    key: \"getShared\",\n    value: function getShared(builder) {\n      var hash = this.getHash(builder);\n      var nodeFromHash = builder.getNodeFromHash(hash);\n      return nodeFromHash || this;\n    }\n  }, {\n    key: \"setup\",\n    value: function setup(builder) {\n      var nodeProperties = builder.getNodeProperties(this);\n      var _iterator3 = _createForOfIteratorHelper(this.getChildren()),\n        _step3;\n      try {\n        for (_iterator3.s(); !(_step3 = _iterator3.n()).done;) {\n          var childNode = _step3.value.childNode;\n          nodeProperties['_node' + childNode.id] = childNode;\n        }\n\n        // return a outputNode if exists\n      } catch (err) {\n        _iterator3.e(err);\n      } finally {\n        _iterator3.f();\n      }\n      return null;\n    }\n  }, {\n    key: \"construct\",\n    value: function construct(builder) {\n      // @deprecated, r157\n\n      console.warn('THREE.Node: construct() is deprecated. Use setup() instead.');\n      return this.setup(builder);\n    }\n  }, {\n    key: \"analyze\",\n    value: function analyze(builder) {\n      var nodeData = builder.getDataFromNode(this);\n      nodeData.dependenciesCount = nodeData.dependenciesCount === undefined ? 1 : nodeData.dependenciesCount + 1;\n      if (nodeData.dependenciesCount === 1) {\n        // node flow children\n\n        var nodeProperties = builder.getNodeProperties(this);\n        for (var _i = 0, _Object$values = Object.values(nodeProperties); _i < _Object$values.length; _i++) {\n          var childNode = _Object$values[_i];\n          if (childNode && childNode.isNode === true) {\n            childNode.build(builder);\n          }\n        }\n      }\n    }\n  }, {\n    key: \"generate\",\n    value: function generate(builder, output) {\n      var _builder$getNodePrope = builder.getNodeProperties(this),\n        outputNode = _builder$getNodePrope.outputNode;\n      if (outputNode && outputNode.isNode === true) {\n        return outputNode.build(builder, output);\n      }\n    }\n  }, {\n    key: \"updateBefore\",\n    value: function updateBefore( /*frame*/\n    ) {\n      console.warn('Abstract function.');\n    }\n  }, {\n    key: \"update\",\n    value: function update( /*frame*/\n    ) {\n      console.warn('Abstract function.');\n    }\n  }, {\n    key: \"build\",\n    value: function build(builder) {\n      var output = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : null;\n      var refNode = this.getShared(builder);\n      if (this !== refNode) {\n        return refNode.build(builder, output);\n      }\n      builder.addNode(this);\n      builder.addChain(this);\n\n      /* Build stages expected results:\n      \t- \"setup\"\t\t-> Node\n      \t- \"analyze\"\t\t-> null\n      \t- \"generate\"\t-> String\n      */\n      var result = null;\n      var buildStage = builder.getBuildStage();\n      if (buildStage === 'setup') {\n        var properties = builder.getNodeProperties(this);\n        if (properties.initialized !== true || builder.context.tempRead === false) {\n          var stackNodesBeforeSetup = builder.stack.nodes.length;\n          properties.initialized = true;\n          properties.outputNode = this.setup(builder);\n          if (properties.outputNode !== null && builder.stack.nodes.length !== stackNodesBeforeSetup) {\n            properties.outputNode = builder.stack;\n          }\n          for (var _i2 = 0, _Object$values2 = Object.values(properties); _i2 < _Object$values2.length; _i2++) {\n            var childNode = _Object$values2[_i2];\n            if (childNode && childNode.isNode === true) {\n              childNode.build(builder);\n            }\n          }\n        }\n      } else if (buildStage === 'analyze') {\n        this.analyze(builder);\n      } else if (buildStage === 'generate') {\n        var isGenerateOnce = this.generate.length === 1;\n        if (isGenerateOnce) {\n          var type = this.getNodeType(builder);\n          var nodeData = builder.getDataFromNode(this);\n          result = nodeData.snippet;\n          if (result === undefined /*|| builder.context.tempRead === false*/) {\n            result = this.generate(builder) || '';\n            nodeData.snippet = result;\n          }\n          result = builder.format(result, type, output);\n        } else {\n          result = this.generate(builder, output) || '';\n        }\n      }\n      builder.removeChain(this);\n      return result;\n    }\n  }, {\n    key: \"getSerializeChildren\",\n    value: function getSerializeChildren() {\n      return getNodeChildren(this);\n    }\n  }, {\n    key: \"serialize\",\n    value: function serialize(json) {\n      var nodeChildren = this.getSerializeChildren();\n      var inputNodes = {};\n      var _iterator4 = _createForOfIteratorHelper(nodeChildren),\n        _step4;\n      try {\n        for (_iterator4.s(); !(_step4 = _iterator4.n()).done;) {\n          var _step4$value = _step4.value,\n            property = _step4$value.property,\n            index = _step4$value.index,\n            childNode = _step4$value.childNode;\n          if (index !== undefined) {\n            if (inputNodes[property] === undefined) {\n              inputNodes[property] = Number.isInteger(index) ? [] : {};\n            }\n            inputNodes[property][index] = childNode.toJSON(json.meta).uuid;\n          } else {\n            inputNodes[property] = childNode.toJSON(json.meta).uuid;\n          }\n        }\n      } catch (err) {\n        _iterator4.e(err);\n      } finally {\n        _iterator4.f();\n      }\n      if (Object.keys(inputNodes).length > 0) {\n        json.inputNodes = inputNodes;\n      }\n    }\n  }, {\n    key: \"deserialize\",\n    value: function deserialize(json) {\n      if (json.inputNodes !== undefined) {\n        var nodes = json.meta.nodes;\n        for (var property in json.inputNodes) {\n          if (Array.isArray(json.inputNodes[property])) {\n            var inputArray = [];\n            var _iterator5 = _createForOfIteratorHelper(json.inputNodes[property]),\n              _step5;\n            try {\n              for (_iterator5.s(); !(_step5 = _iterator5.n()).done;) {\n                var uuid = _step5.value;\n                inputArray.push(nodes[uuid]);\n              }\n            } catch (err) {\n              _iterator5.e(err);\n            } finally {\n              _iterator5.f();\n            }\n            this[property] = inputArray;\n          } else if (typeof json.inputNodes[property] === 'object') {\n            var inputObject = {};\n            for (var subProperty in json.inputNodes[property]) {\n              var _uuid = json.inputNodes[property][subProperty];\n              inputObject[subProperty] = nodes[_uuid];\n            }\n            this[property] = inputObject;\n          } else {\n            var _uuid2 = json.inputNodes[property];\n            this[property] = nodes[_uuid2];\n          }\n        }\n      }\n    }\n  }, {\n    key: \"toJSON\",\n    value: function toJSON(meta) {\n      var uuid = this.uuid,\n        type = this.type;\n      var isRoot = meta === undefined || typeof meta === 'string';\n      if (isRoot) {\n        meta = {\n          textures: {},\n          images: {},\n          nodes: {}\n        };\n      }\n\n      // serialize\n\n      var data = meta.nodes[uuid];\n      if (data === undefined) {\n        data = {\n          uuid: uuid,\n          type: type,\n          meta: meta,\n          metadata: {\n            version: 4.6,\n            type: 'Node',\n            generator: 'Node.toJSON'\n          }\n        };\n        if (isRoot !== true) meta.nodes[data.uuid] = data;\n        this.serialize(data);\n        delete data.meta;\n      }\n\n      // TODO: Copied from Object3D.toJSON\n\n      function extractFromCache(cache) {\n        var values = [];\n        for (var key in cache) {\n          var _data = cache[key];\n          delete _data.metadata;\n          values.push(_data);\n        }\n        return values;\n      }\n      if (isRoot) {\n        var textures = extractFromCache(meta.textures);\n        var images = extractFromCache(meta.images);\n        var nodes = extractFromCache(meta.nodes);\n        if (textures.length > 0) data.textures = textures;\n        if (images.length > 0) data.images = images;\n        if (nodes.length > 0) data.nodes = nodes;\n      }\n      return data;\n    }\n  }]);\n  return Node;\n}(EventDispatcher);\nexport default Node;\nexport function addNodeClass(type, nodeClass) {\n  if (typeof nodeClass !== 'function' || !type) throw new Error(\"Node class \".concat(type, \" is not a class\"));\n  if (NodeClasses.has(type)) throw new Error(\"Redefinition of node class \".concat(type));\n  NodeClasses.set(type, nodeClass);\n  nodeClass.type = type;\n}\nexport function createNodeFromType(type) {\n  var Class = NodeClasses.get(type);\n  if (Class !== undefined) {\n    return new Class();\n  }\n}","map":{"version":3,"names":["EventDispatcher","NodeUpdateType","getNodeChildren","getCacheKey","MathUtils","NodeClasses","Map","_nodeId","Node","_EventDispatcher","_inherits","_super","_createSuper","_this","nodeType","arguments","length","undefined","_classCallCheck","call","updateType","NONE","updateBeforeType","uuid","generateUUID","isNode","Object","defineProperty","_assertThisInitialized","value","_createClass","key","get","constructor","type","getSelf","self","updateReference","isGlobal","_regeneratorRuntime","mark","getChildren","_iterator","_step","_loop","wrap","getChildren$","_context2","prev","next","_createForOfIteratorHelper","_step$value","property","index","childNode","_loop$","_context","replaceNode","node","stop","s","n","done","delegateYield","t1","e","f","finish","dispose","dispatchEvent","traverse","callback","_iterator2","_step2","_step2$value","err","getHash","getUpdateType","getUpdateBeforeType","getNodeType","builder","nodeProperties","getNodeProperties","outputNode","getShared","hash","nodeFromHash","getNodeFromHash","setup","_iterator3","_step3","id","construct","console","warn","analyze","nodeData","getDataFromNode","dependenciesCount","_i","_Object$values","values","build","generate","output","_builder$getNodePrope","updateBefore","update","refNode","addNode","addChain","result","buildStage","getBuildStage","properties","initialized","context","tempRead","stackNodesBeforeSetup","stack","nodes","_i2","_Object$values2","isGenerateOnce","snippet","format","removeChain","getSerializeChildren","serialize","json","nodeChildren","inputNodes","_iterator4","_step4","_step4$value","Number","isInteger","toJSON","meta","keys","deserialize","Array","isArray","inputArray","_iterator5","_step5","push","inputObject","subProperty","isRoot","textures","images","data","metadata","version","generator","extractFromCache","cache","addNodeClass","nodeClass","Error","concat","has","set","createNodeFromType","Class"],"sources":["/home/darkadius/ros2_ws/src/BotshareWIP/ROS2/robotui/node_modules/three/examples/jsm/nodes/core/Node.js"],"sourcesContent":["import { EventDispatcher } from 'three';\nimport { NodeUpdateType } from './constants.js';\nimport { getNodeChildren, getCacheKey } from './NodeUtils.js';\nimport { MathUtils } from 'three';\n\nconst NodeClasses = new Map();\n\nlet _nodeId = 0;\n\nclass Node extends EventDispatcher {\n\n\tconstructor( nodeType = null ) {\n\n\t\tsuper();\n\n\t\tthis.nodeType = nodeType;\n\n\t\tthis.updateType = NodeUpdateType.NONE;\n\t\tthis.updateBeforeType = NodeUpdateType.NONE;\n\n\t\tthis.uuid = MathUtils.generateUUID();\n\n\t\tthis.isNode = true;\n\n\t\tObject.defineProperty( this, 'id', { value: _nodeId ++ } );\n\n\t}\n\n\tget type() {\n\n\t\treturn this.constructor.type;\n\n\t}\n\n\tgetSelf() {\n\n\t\t// Returns non-node object.\n\n\t\treturn this.self || this;\n\n\t}\n\n\tupdateReference() {\n\n\t\treturn this;\n\n\t}\n\n\tisGlobal( /*builder*/ ) {\n\n\t\treturn false;\n\n\t}\n\n\t* getChildren() {\n\n\t\tconst self = this;\n\n\t\tfor ( const { property, index, childNode } of getNodeChildren( this ) ) {\n\n\t\t\tyield { childNode, replaceNode( node ) {\n\n\t\t\t\tif ( index === undefined ) self[ property ] = node;\n\t\t\t\telse self[ property ][ index ] = node;\n\n\t\t\t} };\n\n\t\t}\n\n\t}\n\n\tdispose() {\n\n\t\tthis.dispatchEvent( { type: 'dispose' } );\n\n\t}\n\n\ttraverse( callback, replaceNode = null ) {\n\n\t\tcallback( this, replaceNode );\n\n\t\tfor ( const { childNode, replaceNode } of this.getChildren() ) {\n\n\t\t\tchildNode.traverse( callback, replaceNode );\n\n\t\t}\n\n\t}\n\n\tgetCacheKey() {\n\n\t\treturn getCacheKey( this );\n\n\t}\n\n\tgetHash( /*builder*/ ) {\n\n\t\treturn this.uuid;\n\n\t}\n\n\tgetUpdateType() {\n\n\t\treturn this.updateType;\n\n\t}\n\n\tgetUpdateBeforeType() {\n\n\t\treturn this.updateBeforeType;\n\n\t}\n\n\tgetNodeType( builder ) {\n\n\t\tconst nodeProperties = builder.getNodeProperties( this );\n\n\t\tif ( nodeProperties.outputNode ) {\n\n\t\t\treturn nodeProperties.outputNode.getNodeType( builder );\n\n\t\t}\n\n\t\treturn this.nodeType;\n\n\t}\n\n\tgetShared( builder ) {\n\n\t\tconst hash = this.getHash( builder );\n\t\tconst nodeFromHash = builder.getNodeFromHash( hash );\n\n\t\treturn nodeFromHash || this;\n\n\t}\n\n\tsetup( builder ) {\n\n\t\tconst nodeProperties = builder.getNodeProperties( this );\n\n\t\tfor ( const { childNode } of this.getChildren() ) {\n\n\t\t\tnodeProperties[ '_node' + childNode.id ] = childNode;\n\n\t\t}\n\n\t\t// return a outputNode if exists\n\t\treturn null;\n\n\t}\n\n\tconstruct( builder ) { // @deprecated, r157\n\n\t\tconsole.warn( 'THREE.Node: construct() is deprecated. Use setup() instead.' );\n\n\t\treturn this.setup( builder );\n\n\t}\n\n\tanalyze( builder ) {\n\n\t\tconst nodeData = builder.getDataFromNode( this );\n\t\tnodeData.dependenciesCount = nodeData.dependenciesCount === undefined ? 1 : nodeData.dependenciesCount + 1;\n\n\t\tif ( nodeData.dependenciesCount === 1 ) {\n\n\t\t\t// node flow children\n\n\t\t\tconst nodeProperties = builder.getNodeProperties( this );\n\n\t\t\tfor ( const childNode of Object.values( nodeProperties ) ) {\n\n\t\t\t\tif ( childNode && childNode.isNode === true ) {\n\n\t\t\t\t\tchildNode.build( builder );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\tgenerate( builder, output ) {\n\n\t\tconst { outputNode } = builder.getNodeProperties( this );\n\n\t\tif ( outputNode && outputNode.isNode === true ) {\n\n\t\t\treturn outputNode.build( builder, output );\n\n\t\t}\n\n\t}\n\n\tupdateBefore( /*frame*/ ) {\n\n\t\tconsole.warn( 'Abstract function.' );\n\n\t}\n\n\tupdate( /*frame*/ ) {\n\n\t\tconsole.warn( 'Abstract function.' );\n\n\t}\n\n\tbuild( builder, output = null ) {\n\n\t\tconst refNode = this.getShared( builder );\n\n\t\tif ( this !== refNode ) {\n\n\t\t\treturn refNode.build( builder, output );\n\n\t\t}\n\n\t\tbuilder.addNode( this );\n\t\tbuilder.addChain( this );\n\n\t\t/* Build stages expected results:\n\t\t\t- \"setup\"\t\t-> Node\n\t\t\t- \"analyze\"\t\t-> null\n\t\t\t- \"generate\"\t-> String\n\t\t*/\n\t\tlet result = null;\n\n\t\tconst buildStage = builder.getBuildStage();\n\n\t\tif ( buildStage === 'setup' ) {\n\n\t\t\tconst properties = builder.getNodeProperties( this );\n\n\t\t\tif ( properties.initialized !== true || builder.context.tempRead === false ) {\n\n\t\t\t\tconst stackNodesBeforeSetup = builder.stack.nodes.length;\n\n\t\t\t\tproperties.initialized = true;\n\t\t\t\tproperties.outputNode = this.setup( builder );\n\n\t\t\t\tif ( properties.outputNode !== null && builder.stack.nodes.length !== stackNodesBeforeSetup ) {\n\n\t\t\t\t\tproperties.outputNode = builder.stack;\n\n\t\t\t\t}\n\n\t\t\t\tfor ( const childNode of Object.values( properties ) ) {\n\n\t\t\t\t\tif ( childNode && childNode.isNode === true ) {\n\n\t\t\t\t\t\tchildNode.build( builder );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t} else if ( buildStage === 'analyze' ) {\n\n\t\t\tthis.analyze( builder );\n\n\t\t} else if ( buildStage === 'generate' ) {\n\n\t\t\tconst isGenerateOnce = this.generate.length === 1;\n\n\t\t\tif ( isGenerateOnce ) {\n\n\t\t\t\tconst type = this.getNodeType( builder );\n\t\t\t\tconst nodeData = builder.getDataFromNode( this );\n\n\t\t\t\tresult = nodeData.snippet;\n\n\t\t\t\tif ( result === undefined /*|| builder.context.tempRead === false*/ ) {\n\n\t\t\t\t\tresult = this.generate( builder ) || '';\n\n\t\t\t\t\tnodeData.snippet = result;\n\n\t\t\t\t}\n\n\t\t\t\tresult = builder.format( result, type, output );\n\n\t\t\t} else {\n\n\t\t\t\tresult = this.generate( builder, output ) || '';\n\n\t\t\t}\n\n\t\t}\n\n\t\tbuilder.removeChain( this );\n\n\t\treturn result;\n\n\t}\n\n\tgetSerializeChildren() {\n\n\t\treturn getNodeChildren( this );\n\n\t}\n\n\tserialize( json ) {\n\n\t\tconst nodeChildren = this.getSerializeChildren();\n\n\t\tconst inputNodes = {};\n\n\t\tfor ( const { property, index, childNode } of nodeChildren ) {\n\n\t\t\tif ( index !== undefined ) {\n\n\t\t\t\tif ( inputNodes[ property ] === undefined ) {\n\n\t\t\t\t\tinputNodes[ property ] = Number.isInteger( index ) ? [] : {};\n\n\t\t\t\t}\n\n\t\t\t\tinputNodes[ property ][ index ] = childNode.toJSON( json.meta ).uuid;\n\n\t\t\t} else {\n\n\t\t\t\tinputNodes[ property ] = childNode.toJSON( json.meta ).uuid;\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( Object.keys( inputNodes ).length > 0 ) {\n\n\t\t\tjson.inputNodes = inputNodes;\n\n\t\t}\n\n\t}\n\n\tdeserialize( json ) {\n\n\t\tif ( json.inputNodes !== undefined ) {\n\n\t\t\tconst nodes = json.meta.nodes;\n\n\t\t\tfor ( const property in json.inputNodes ) {\n\n\t\t\t\tif ( Array.isArray( json.inputNodes[ property ] ) ) {\n\n\t\t\t\t\tconst inputArray = [];\n\n\t\t\t\t\tfor ( const uuid of json.inputNodes[ property ] ) {\n\n\t\t\t\t\t\tinputArray.push( nodes[ uuid ] );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tthis[ property ] = inputArray;\n\n\t\t\t\t} else if ( typeof json.inputNodes[ property ] === 'object' ) {\n\n\t\t\t\t\tconst inputObject = {};\n\n\t\t\t\t\tfor ( const subProperty in json.inputNodes[ property ] ) {\n\n\t\t\t\t\t\tconst uuid = json.inputNodes[ property ][ subProperty ];\n\n\t\t\t\t\t\tinputObject[ subProperty ] = nodes[ uuid ];\n\n\t\t\t\t\t}\n\n\t\t\t\t\tthis[ property ] = inputObject;\n\n\t\t\t\t} else {\n\n\t\t\t\t\tconst uuid = json.inputNodes[ property ];\n\n\t\t\t\t\tthis[ property ] = nodes[ uuid ];\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\ttoJSON( meta ) {\n\n\t\tconst { uuid, type } = this;\n\t\tconst isRoot = ( meta === undefined || typeof meta === 'string' );\n\n\t\tif ( isRoot ) {\n\n\t\t\tmeta = {\n\t\t\t\ttextures: {},\n\t\t\t\timages: {},\n\t\t\t\tnodes: {}\n\t\t\t};\n\n\t\t}\n\n\t\t// serialize\n\n\t\tlet data = meta.nodes[ uuid ];\n\n\t\tif ( data === undefined ) {\n\n\t\t\tdata = {\n\t\t\t\tuuid,\n\t\t\t\ttype,\n\t\t\t\tmeta,\n\t\t\t\tmetadata: {\n\t\t\t\t\tversion: 4.6,\n\t\t\t\t\ttype: 'Node',\n\t\t\t\t\tgenerator: 'Node.toJSON'\n\t\t\t\t}\n\t\t\t};\n\n\t\t\tif ( isRoot !== true ) meta.nodes[ data.uuid ] = data;\n\n\t\t\tthis.serialize( data );\n\n\t\t\tdelete data.meta;\n\n\t\t}\n\n\t\t// TODO: Copied from Object3D.toJSON\n\n\t\tfunction extractFromCache( cache ) {\n\n\t\t\tconst values = [];\n\n\t\t\tfor ( const key in cache ) {\n\n\t\t\t\tconst data = cache[ key ];\n\t\t\t\tdelete data.metadata;\n\t\t\t\tvalues.push( data );\n\n\t\t\t}\n\n\t\t\treturn values;\n\n\t\t}\n\n\t\tif ( isRoot ) {\n\n\t\t\tconst textures = extractFromCache( meta.textures );\n\t\t\tconst images = extractFromCache( meta.images );\n\t\t\tconst nodes = extractFromCache( meta.nodes );\n\n\t\t\tif ( textures.length > 0 ) data.textures = textures;\n\t\t\tif ( images.length > 0 ) data.images = images;\n\t\t\tif ( nodes.length > 0 ) data.nodes = nodes;\n\n\t\t}\n\n\t\treturn data;\n\n\t}\n\n}\n\nexport default Node;\n\nexport function addNodeClass( type, nodeClass ) {\n\n\tif ( typeof nodeClass !== 'function' || ! type ) throw new Error( `Node class ${ type } is not a class` );\n\tif ( NodeClasses.has( type ) ) throw new Error( `Redefinition of node class ${ type }` );\n\n\tNodeClasses.set( type, nodeClass );\n\tnodeClass.type = type;\n\n}\n\nexport function createNodeFromType( type ) {\n\n\tconst Class = NodeClasses.get( type );\n\n\tif ( Class !== undefined ) {\n\n\t\treturn new Class();\n\n\t}\n\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}