{"ast":null,"code":"import _classCallCheck from \"/home/darkadius/ros2_ws/src/BotshareWIP/ROS2/robotui/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";\nimport _createClass from \"/home/darkadius/ros2_ws/src/BotshareWIP/ROS2/robotui/node_modules/@babel/runtime/helpers/esm/createClass.js\";\nimport _inherits from \"/home/darkadius/ros2_ws/src/BotshareWIP/ROS2/robotui/node_modules/@babel/runtime/helpers/esm/inherits.js\";\nimport _createSuper from \"/home/darkadius/ros2_ws/src/BotshareWIP/ROS2/robotui/node_modules/@babel/runtime/helpers/esm/createSuper.js\";\nimport TextureNode from '../accessors/TextureNode.js';\nimport { NodeUpdateType } from '../core/constants.js';\nimport { addNodeClass } from '../core/Node.js';\nimport { addNodeElement, nodeProxy } from '../shadernode/ShaderNode.js';\nimport { viewportTopLeft } from './ViewportNode.js';\nimport { Vector2, FramebufferTexture, LinearMipmapLinearFilter } from 'three';\nvar _size = new Vector2();\nvar ViewportTextureNode = /*#__PURE__*/function (_TextureNode) {\n  _inherits(ViewportTextureNode, _TextureNode);\n  var _super = _createSuper(ViewportTextureNode);\n  function ViewportTextureNode() {\n    var _this;\n    var uvNode = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : viewportTopLeft;\n    var levelNode = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : null;\n    var framebufferTexture = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : null;\n    _classCallCheck(this, ViewportTextureNode);\n    if (framebufferTexture === null) {\n      framebufferTexture = new FramebufferTexture();\n      framebufferTexture.minFilter = LinearMipmapLinearFilter;\n    }\n    _this = _super.call(this, framebufferTexture, uvNode, levelNode);\n    _this.generateMipmaps = false;\n    _this.isOutputTextureNode = true;\n    _this.updateBeforeType = NodeUpdateType.FRAME;\n    return _this;\n  }\n  _createClass(ViewportTextureNode, [{\n    key: \"updateBefore\",\n    value: function updateBefore(frame) {\n      var renderer = frame.renderer;\n      renderer.getDrawingBufferSize(_size);\n\n      //\n\n      var framebufferTexture = this.value;\n      if (framebufferTexture.image.width !== _size.width || framebufferTexture.image.height !== _size.height) {\n        framebufferTexture.image.width = _size.width;\n        framebufferTexture.image.height = _size.height;\n        framebufferTexture.needsUpdate = true;\n      }\n\n      //\n\n      var currentGenerateMipmaps = framebufferTexture.generateMipmaps;\n      framebufferTexture.generateMipmaps = this.generateMipmaps;\n      renderer.copyFramebufferToTexture(framebufferTexture);\n      framebufferTexture.generateMipmaps = currentGenerateMipmaps;\n    }\n  }, {\n    key: \"clone\",\n    value: function clone() {\n      return new this.constructor(this.uvNode, this.levelNode, this.value);\n    }\n  }]);\n  return ViewportTextureNode;\n}(TextureNode);\nexport default ViewportTextureNode;\nexport var viewportTexture = nodeProxy(ViewportTextureNode);\nexport var viewportMipTexture = nodeProxy(ViewportTextureNode, null, null, {\n  generateMipmaps: true\n});\naddNodeElement('viewportTexture', viewportTexture);\naddNodeElement('viewportMipTexture', viewportMipTexture);\naddNodeClass('ViewportTextureNode', ViewportTextureNode);","map":{"version":3,"names":["TextureNode","NodeUpdateType","addNodeClass","addNodeElement","nodeProxy","viewportTopLeft","Vector2","FramebufferTexture","LinearMipmapLinearFilter","_size","ViewportTextureNode","_TextureNode","_inherits","_super","_createSuper","_this","uvNode","arguments","length","undefined","levelNode","framebufferTexture","_classCallCheck","minFilter","call","generateMipmaps","isOutputTextureNode","updateBeforeType","FRAME","_createClass","key","value","updateBefore","frame","renderer","getDrawingBufferSize","image","width","height","needsUpdate","currentGenerateMipmaps","copyFramebufferToTexture","clone","constructor","viewportTexture","viewportMipTexture"],"sources":["/home/darkadius/ros2_ws/src/BotshareWIP/ROS2/robotui/node_modules/three/examples/jsm/nodes/display/ViewportTextureNode.js"],"sourcesContent":["import TextureNode from '../accessors/TextureNode.js';\nimport { NodeUpdateType } from '../core/constants.js';\nimport { addNodeClass } from '../core/Node.js';\nimport { addNodeElement, nodeProxy } from '../shadernode/ShaderNode.js';\nimport { viewportTopLeft } from './ViewportNode.js';\nimport { Vector2, FramebufferTexture, LinearMipmapLinearFilter } from 'three';\n\nconst _size = new Vector2();\n\nclass ViewportTextureNode extends TextureNode {\n\n\tconstructor( uvNode = viewportTopLeft, levelNode = null, framebufferTexture = null ) {\n\n\t\tif ( framebufferTexture === null ) {\n\n\t\t\tframebufferTexture = new FramebufferTexture();\n\t\t\tframebufferTexture.minFilter = LinearMipmapLinearFilter;\n\n\t\t}\n\n\t\tsuper( framebufferTexture, uvNode, levelNode );\n\n\t\tthis.generateMipmaps = false;\n\n\t\tthis.isOutputTextureNode = true;\n\n\t\tthis.updateBeforeType = NodeUpdateType.FRAME;\n\n\t}\n\n\tupdateBefore( frame ) {\n\n\t\tconst renderer = frame.renderer;\n\t\trenderer.getDrawingBufferSize( _size );\n\n\t\t//\n\n\t\tconst framebufferTexture = this.value;\n\n\t\tif ( framebufferTexture.image.width !== _size.width || framebufferTexture.image.height !== _size.height ) {\n\n\t\t\tframebufferTexture.image.width = _size.width;\n\t\t\tframebufferTexture.image.height = _size.height;\n\t\t\tframebufferTexture.needsUpdate = true;\n\n\t\t}\n\n\t\t//\n\n\t\tconst currentGenerateMipmaps = framebufferTexture.generateMipmaps;\n\t\tframebufferTexture.generateMipmaps = this.generateMipmaps;\n\n\t\trenderer.copyFramebufferToTexture( framebufferTexture );\n\n\t\tframebufferTexture.generateMipmaps = currentGenerateMipmaps;\n\n\t}\n\n\tclone() {\n\n\t\treturn new this.constructor( this.uvNode, this.levelNode, this.value );\n\n\t}\n\n}\n\nexport default ViewportTextureNode;\n\nexport const viewportTexture = nodeProxy( ViewportTextureNode );\nexport const viewportMipTexture = nodeProxy( ViewportTextureNode, null, null, { generateMipmaps: true } );\n\naddNodeElement( 'viewportTexture', viewportTexture );\naddNodeElement( 'viewportMipTexture', viewportMipTexture );\n\naddNodeClass( 'ViewportTextureNode', ViewportTextureNode );\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}