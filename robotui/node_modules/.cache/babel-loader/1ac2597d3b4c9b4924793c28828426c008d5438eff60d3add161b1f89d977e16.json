{"ast":null,"code":"import _slicedToArray from\"/home/darkadius/ros2_ws/src/BotshareWIP/ROS2/robotui/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useContext,useRef,useState,useEffect,useCallback}from\"react\";import{ToastContainer,toast}from\"react-toastify\";import\"react-toastify/dist/ReactToastify.css\";import{RosContext}from\"../app/App\";import{AppConfig}from\"../shared/constants/index\";import{testStructure}from\"../shared/constants/testjson\";import TimeModal from\"../components/modal/TimeModal\";import RouteModal from\"../components/modal/RouteModal\";import TextInputModal from\"../components/modal/TextInputModal\";import Map from\"../components/Map\";import Logs from\"../components/Logs\";import Button from\"../shared/ui/Button\";import{cos}from\"three/examples/jsm/nodes/Nodes.js\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var removeCsv=function removeCsv(data){if(Array.isArray(data)){return data.map(function(item){if(typeof item===\"string\"){return item.replace(\".csv\",\"\");}return removeCsv(item);});}else if(typeof data===\"object\"&&data!==null){var result={};for(var key in data){result[key]=removeCsv(data[key]);}return result;}return data;};function replaceUnderscoresInKeysAndValues(obj){if(Array.isArray(obj)){return obj.map(function(item){return replaceUnderscoresInKeysAndValues(item);});}else if(typeof obj===\"object\"&&obj!==null){var newObj={};for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var newKey=key.replace(/_/g,\" \");newObj[newKey]=replaceUnderscoresInKeysAndValues(obj[key]);}}return newObj;}else if(typeof obj===\"string\"){return obj.replace(/_/g,\" \");}return obj;}var processObjectStrings=function processObjectStrings(obj){if(typeof obj===\"object\"&&obj!==null){var result={};for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){result[key]=processObjectStrings(obj[key]);}}return result;}else if(typeof obj===\"string\"){return obj.trim().replace(/\\s/g,\"_\");}return obj;};var findMapArray=function findMapArray(structure,activeFiles){var groupObject=structure.find(function(floor){return Object.prototype.hasOwnProperty.call(floor,activeFiles.group);});if(groupObject){var mapsArray=groupObject[activeFiles.group];var mapObject=mapsArray.find(function(room){return Object.prototype.hasOwnProperty.call(room,activeFiles.map);});if(mapObject){return mapObject[activeFiles.map];}}return[];};var removePointFromCanvas=function removePointFromCanvas(){var markerOnMap=window.NAV2D.orientatedPointItem;window.NAV2D.pointsArray=window.NAV2D.pointsArray.filter(function(marker){return marker!==markerOnMap;});window.NAV2D.canvas.scene.removeChild(markerOnMap);window.NAV2D.finishedPointItem=null;window.NAV2D.orientatedPointItem=null;};var RoutePage=function RoutePage(){var ros=useContext(RosContext);// eslint-disable-next-line no-unused-vars\nvar _useState=useState(null),_useState2=_slicedToArray(_useState,2),selectedPointType=_useState2[0],setSelectedPointType=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),pointsSettable=_useState4[0],setPointsSettable=_useState4[1];// eslint-disable-next-line no-unused-vars\nvar _useState5=useState(\"0\"),_useState6=_slicedToArray(_useState5,2),hoursValue=_useState6[0],setHoursValue=_useState6[1];var latestHoursValue=useRef(hoursValue);// eslint-disable-next-line no-unused-vars\nvar _useState7=useState(\"0\"),_useState8=_slicedToArray(_useState7,2),minutesValue=_useState8[0],setMinutesValue=_useState8[1];var latestMinutesValue=useRef(minutesValue);useEffect(function(){latestHoursValue.current=hoursValue;latestMinutesValue.current=minutesValue;},[hoursValue,minutesValue]);var _useState9=useState({group:\"\",map:\"\",route:\"\"}),_useState10=_slicedToArray(_useState9,2),selectedFile=_useState10[0],setSelectedFile=_useState10[1];var _useState11=useState(false),_useState12=_slicedToArray(_useState11,2),openRouteModal=_useState12[0],setOpenRouteModal=_useState12[1];var _useState13=useState(false),_useState14=_slicedToArray(_useState13,2),openTimeModal=_useState14[0],setOpenTimeModal=_useState14[1];var _useState15=useState(false),_useState16=_slicedToArray(_useState15,2),openInputModal=_useState16[0],setOpenInputModal=_useState16[1];var _useState17=useState([]),_useState18=_slicedToArray(_useState17,2),filesData=_useState18[0],setFilesData=_useState18[1];var childRef=useRef(null);var routesModalType=useRef(null);var isRoutesModalWithInput=useRef(null);var routesModalHeader=useRef(null);var modalKey=useRef(null);var textInputHeader=useRef(null);var textInputPlaceholder=useRef(null);/* TOPICS */var filesReqTopic=useRef(new window.ROSLIB.Topic({ros:ros,name:\"/nav_data_req\",messageType:\"std_msgs/Empty\"}));var filesResonseTopic=useRef(new window.ROSLIB.Topic({ros:ros,name:\"/nav_data_resp\",messageType:\"std_msgs/String\"}));var uiOperationTopic=useRef(new window.ROSLIB.Topic({ros:ros,name:AppConfig.UI_OPERATION_TOPIC,messageType:\"std_msgs/String\"}));var onMapClickHandler=useCallback(function(){/**\n     * У нас при отжатии кнопки канвас генерирует window.NAV2D.orientatedPointItem, который нужен внутри sendPointToRobot, onMapClickHandler тоже срабатывает при отжатии кнопки и на момент вызова sendPointToRobot orientatedPointItem ещё не создан. Для решения проблемы сейчас и используется костыль из таймера.\n     */if(!window.NAV2D.arePointsSettable)return;var timeObj={hours:latestHoursValue.current,minutes:latestMinutesValue.current};setTimeout(function(){if(!timeObj.hours&&!timeObj.minutes){toast.warn(\"Enter hours and minutes\");removePointFromCanvas();return;}if(timeObj.hours<0||timeObj.hours>23){toast.warn(\"Hours can't be less then 0 and more then 23\");removePointFromCanvas();return;}if(timeObj.minutes<0||timeObj.minutes>59){toast.warn(\"Minutes can't be less then 0 and more then 59\");removePointFromCanvas();return;}window.NAV2D.sendPointToRobot(ros,timeObj);},0);},[ros]);// eslint-disable-next-line no-unused-vars\nvar getMockedData=function getMockedData(){var serializedTestArray=removeCsv(testStructure.structure);var serializedTestArrayWithSpaces=replaceUnderscoresInKeysAndValues(serializedTestArray);var testActiveFileWithSpaces=replaceUnderscoresInKeysAndValues(testStructure.active_files);setFilesData(serializedTestArrayWithSpaces);setSelectedFile(testActiveFileWithSpaces);};useEffect(function(){window.NAV2D.ClearMap();onOperationTopicPublish(\"clear_route\");getMockedData();var currentFilesResponseTopic=filesResonseTopic.current;var currentMap=childRef.current;currentFilesResponseTopic.subscribe(function(data){var response=data.data;var responseObject=JSON.parse(response);var serializedArray=removeCsv(responseObject.structure);var arrayWithSpaces=replaceUnderscoresInKeysAndValues(serializedArray);// const serializedActiveFile = {\n//   group: responseObject.active_files.group,\n//   map: responseObject.active_files.map,\n//   route: responseObject.active_files.route.replace(\".csv\", \"\"),\n// };\nvar activeFilesWithSpaces=replaceUnderscoresInKeysAndValues({group:responseObject.active_files.group,map:responseObject.active_files.map,route:responseObject.active_files.route.replace(\".csv\",\"\")});var filtredArrayBySelectedRoute=findMapArray(arrayWithSpaces,activeFilesWithSpaces);setFilesData(filtredArrayBySelectedRoute);setSelectedFile(activeFilesWithSpaces);});filesReqTopic.current.publish();return function(){currentFilesResponseTopic.unsubscribe();window.NAV2D.arePointsSettable=false;var mapElement=currentMap.getMapRef();if(mapElement){mapElement.removeEventListener(\"mouseup\",onMapClickHandler);}};},[onMapClickHandler]);var onOperationTopicPublish=function onOperationTopicPublish(message){uiOperationTopic.current.publish(new window.ROSLIB.Message({data:message}));};/* FROM HANDLERS */var onRouteFormSubmitHandler=function onRouteFormSubmitHandler(data){setOpenRouteModal(false);if(data){var operationsConfig={CHANGE_ROUTE:{path:\"change_route\",data:{group:selectedFile.group,map:selectedFile.map,route:data},preActions:function preActions(){return window.NAV2D.ClearMap();},postActions:function postActions(){return setFilesData({group:selectedFile.group,map:selectedFile.map,route:data});}}};var currentOperation=operationsConfig[modalKey.current];if(currentOperation){currentOperation.preActions&&currentOperation.preActions();var objToSendWithoutSpaces=processObjectStrings(currentOperation.data);var stringifiedObjToSend=JSON.stringify(objToSendWithoutSpaces);var messageToSend=\"\".concat(currentOperation.path,\"/\").concat(stringifiedObjToSend);onOperationTopicPublish(messageToSend);currentOperation.postActions&&currentOperation.postActions();}}modalKey.current=null;routesModalType.current=null;isRoutesModalWithInput.current=null;routesModalHeader.current=null;};// TODELETE\nvar onTimeFormSubmitHandler=function onTimeFormSubmitHandler(data){setOpenTimeModal(false);if(data){window.NAV2D.sendPointToRobot(ros,data);}else{var markerOnMap=window.NAV2D.orientatedPointItem;window.NAV2D.pointsArray=window.NAV2D.pointsArray.filter(function(marker){return marker!==markerOnMap;});window.NAV2D.canvas.scene.removeChild(markerOnMap);window.NAV2D.finishedPointItem=null;window.NAV2D.orientatedPointItem=null;}};var onInputFormSubmitHandler=function onInputFormSubmitHandler(data){setOpenInputModal(false);if(data){var operationsConfig={SAVE_ROUTE:{path:\"save_route\",data:{group:selectedFile.group,map:selectedFile.map,route:data},postActions:function postActions(){var mapElement=childRef.current.getMapRef();if(mapElement){mapElement.removeEventListener(\"mouseup\",onMapClickHandler);}setPointsSettable(false);selectedFile.route=data;setSelectedPointType(null);window.NAV2D.pointType=null;window.NAV2D.arePointsSettable=false;}},RENAME_ROUTE:{path:\"rename_route\",data:{group:selectedFile.group,map:selectedFile.map,route_old:selectedFile.route,route_new:data},postActions:function postActions(){var newFileData={group:selectedFile.group,map:selectedFile.map,route:data};setSelectedFile(newFileData);}}};var currentOperation=operationsConfig[modalKey.current];if(currentOperation){currentOperation.preActions&&currentOperation.preActions();var objToSendWithoutSpaces=processObjectStrings(currentOperation.data);var stringifiedObjToSend=JSON.stringify(objToSendWithoutSpaces);var messageToSend=\"\".concat(currentOperation.path,\"/\").concat(stringifiedObjToSend);onOperationTopicPublish(messageToSend);currentOperation.postActions&&currentOperation.postActions();}}modalKey.current=null;textInputHeader.current=null;textInputPlaceholder.current=null;};/* BUTTON HANDLERS */var onNewRouteClick=function onNewRouteClick(){setSelectedPointType(null);setSelectedFile({group:selectedFile.group,map:selectedFile.map,route:\"New route\"});window.NAV2D.pointType=null;window.NAV2D.arePointsSettable=true;var mapElement=childRef.current.getMapRef();if(mapElement){mapElement.addEventListener(\"mouseup\",onMapClickHandler);}setPointsSettable(true);window.NAV2D.ClearMap();onOperationTopicPublish(\"clear_route\");};var onPlanRouteClick=function onPlanRouteClick(){toast.warn(\"Comming soon...\");};var onSaveRouteClick=function onSaveRouteClick(){if(!pointsSettable)return;if(selectedFile.route!==\"New route\"){var dataToSend={group:selectedFile.group,map:selectedFile.map,route:selectedFile.route};var objToSendWithoutSpaces=processObjectStrings(dataToSend);var stringifiedObjToSend=JSON.stringify(objToSendWithoutSpaces);var messageToSend=\"save_route/\".concat(stringifiedObjToSend);onOperationTopicPublish(messageToSend);setSelectedPointType(null);window.NAV2D.pointType=null;window.NAV2D.arePointsSettable=false;var mapElement=childRef.current.getMapRef();if(mapElement){mapElement.removeEventListener(\"mouseup\",onMapClickHandler);}setPointsSettable(false);return;}modalKey.current=\"SAVE_ROUTE\";textInputHeader.current=\"Enter new route name\";textInputPlaceholder.current=\"Name...\";setOpenInputModal(true);};var onChangeRouteClick=function onChangeRouteClick(){console.log(\"filesData\",filesData);window.NAV2D.arePointsSettable=false;setPointsSettable(false);modalKey.current=\"CHANGE_ROUTE\";routesModalType.current=\"selectRoute\";isRoutesModalWithInput.current=false;routesModalHeader.current=\"Select route you want to browse\";setOpenRouteModal(true);};var onEditRouteClick=function onEditRouteClick(){if(pointsSettable){setPointsSettable(false);}else{window.NAV2D.ClearMap();var currentRouteData={group:selectedFile.group,map:selectedFile.map,route:selectedFile.route};var objToSendWithoutSpaces=processObjectStrings(currentRouteData);var stringifiedObjToSend=JSON.stringify(objToSendWithoutSpaces);var messageToSend=\"edit_route/\".concat(stringifiedObjToSend);onOperationTopicPublish(messageToSend);window.NAV2D.arePointsSettable=true;var mapElement=childRef.current.getMapRef();if(mapElement){mapElement.addEventListener(\"mouseup\",onMapClickHandler);}setPointsSettable(true);}};var onClearRouteClick=function onClearRouteClick(){if(!pointsSettable)return;window.NAV2D.ClearMap();onOperationTopicPublish(\"clear_route\");};var onDeleteRouteClick=function onDeleteRouteClick(){window.NAV2D.ClearMap();var currentRouteData={group:selectedFile.group,map:selectedFile.map,route:selectedFile.route};var objToSendWithoutSpaces=processObjectStrings(currentRouteData);var stringifiedObjToSend=JSON.stringify(objToSendWithoutSpaces);var messageToSend=\"delete_route/\".concat(stringifiedObjToSend);onOperationTopicPublish(messageToSend);// modalKey.current = \"DELETE_ROUTE\";\n// routesModalType.current = \"selectRoute\";\n// isRoutesModalWithInput.current = false;\n// routesModalHeader.current = \"Select route you want to delete\";\n// setOpenRouteModal(true);\n};var onRenameRouteClick=function onRenameRouteClick(){// console.log(!pointsSettable || selectedFile.route === \"New route\");\n// if (selectedFile.route === \"New route\") return;\nmodalKey.current=\"RENAME_ROUTE\";textInputHeader.current=\"Enter route new name\";textInputPlaceholder.current=\"Name...\";setOpenInputModal(true);};// eslint-disable-next-line no-unused-vars\nvar onPointClickHandler=function onPointClickHandler(data){setSelectedPointType(data);window.NAV2D.pointType=data;};return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(ToastContainer,{}),openRouteModal&&/*#__PURE__*/_jsx(RouteModal,{routesList:filesData,headerText:routesModalHeader.current,modalHandler:onRouteFormSubmitHandler}),openTimeModal&&/*#__PURE__*/_jsx(TimeModal,{modalHandler:onTimeFormSubmitHandler}),openInputModal&&/*#__PURE__*/_jsx(TextInputModal,{header:textInputHeader.current,placeholder:textInputPlaceholder.current,routesList:filesData,modalHandler:onInputFormSubmitHandler}),/*#__PURE__*/_jsxs(\"div\",{className:\"sectionHeight flex flex-col gap-7 pt-[30px]\",children:[/*#__PURE__*/_jsxs(\"h2\",{className:\"flex w-full flex-wrap items-center justify-center gap-3 text-center font-[RobotoMono] text-3xl font-bold text-themeBlue\",children:[/*#__PURE__*/_jsxs(\"span\",{children:[\"Group:\",\" \",/*#__PURE__*/_jsx(\"span\",{className:\"text-themeDarkBlue\",children:selectedFile.group})]}),/*#__PURE__*/_jsxs(\"span\",{children:[\" \",\"Map: \",/*#__PURE__*/_jsx(\"span\",{className:\"text-themeDarkBlue\",children:selectedFile.map})]}),/*#__PURE__*/_jsxs(\"span\",{children:[selectedFile.route!==\"New route\"&&/*#__PURE__*/_jsx(\"span\",{children:\"Current route:\"}),\" \",/*#__PURE__*/_jsx(\"span\",{className:\"text-themeDarkBlue\",children:selectedFile.route})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex h-full flex-col justify-start gap-[73px] md:flex-row\",children:[/*#__PURE__*/_jsx(\"section\",{className:\"color-white flex w-full flex-col items-start justify-start md:w-[55%]\",children:/*#__PURE__*/_jsx(\"div\",{className:\"h-[400px] w-full lg:h-[674px]\",children:/*#__PURE__*/_jsx(Map,{ref:childRef})})}),/*#__PURE__*/_jsxs(\"section\",{className:\"color-white flex h-[400px] w-full flex-1 flex-col items-center justify-start gap-7 md:w-2/5 lg:gap-[233px]\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex w-full flex-col gap-6 lg:gap-3\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex w-full flex-col items-center justify-center gap-6 lg:flex-row lg:gap-3\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"w-full flex-1\",children:/*#__PURE__*/_jsxs(Button,{onBtnClick:onEditRouteClick,children:[pointsSettable&&/*#__PURE__*/_jsx(\"div\",{children:\"Cancel\"}),!pointsSettable&&/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"span\",{className:\"iconMap\"}),/*#__PURE__*/_jsx(\"span\",{className:\"mx-auto\",children:\"Edit\"})]})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"w-full flex-1\",children:/*#__PURE__*/_jsxs(Button,{onBtnClick:onChangeRouteClick,type:pointsSettable?\"disabled\":\"\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"iconCharge\"}),/*#__PURE__*/_jsx(\"span\",{className:\"mx-auto\",children:\"Change\"})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"w-full flex-1\",children:/*#__PURE__*/_jsxs(Button,{onBtnClick:onSaveRouteClick,type:pointsSettable?\"\":\"disabled\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"iconSave\"}),/*#__PURE__*/_jsx(\"span\",{className:\"mx-auto\",children:\"Save\"})]})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex w-full flex-col items-center justify-center gap-6 lg:flex-row lg:gap-4\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"w-full flex-1\",children:/*#__PURE__*/_jsxs(Button,{onBtnClick:onNewRouteClick,type:pointsSettable?\"disabled\":\"\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"iconPlus\"}),/*#__PURE__*/_jsx(\"span\",{className:\"mx-auto\",children:\"Create\"})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"w-full flex-1\",children:/*#__PURE__*/_jsxs(Button,{size:\"small\",onBtnClick:onPlanRouteClick,children:[/*#__PURE__*/_jsx(\"span\",{className:\"iconMap\"}),/*#__PURE__*/_jsx(\"span\",{className:\"mx-auto\",children:\"Plan\"})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"w-full flex-1\",children:/*#__PURE__*/_jsxs(Button,{onBtnClick:onRenameRouteClick,type:pointsSettable||selectedFile.route===\"Null\"?\"disabled\":\"\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"iconMap\"}),/*#__PURE__*/_jsx(\"span\",{className:\"mx-auto\",children:\"Rename\"})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"w-full flex-1\",children:/*#__PURE__*/_jsxs(Button,{onBtnClick:onDeleteRouteClick,type:pointsSettable?\"disabled\":\"\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"iconTrash\"}),/*#__PURE__*/_jsx(\"span\",{className:\"mx-auto\",children:\"Delete\"})]})})]}),/*#__PURE__*/_jsx(\"div\",{className:\"flex w-full flex-col items-center justify-center gap-6 lg:flex-row lg:gap-3\",children:/*#__PURE__*/_jsx(\"div\",{className:\"w-full flex-1\",children:/*#__PURE__*/_jsxs(Button,{onBtnClick:onClearRouteClick,type:!pointsSettable?\"disabled\":\"\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"iconMap\"}),/*#__PURE__*/_jsx(\"span\",{className:\"mx-auto\",children:\"Clear\"})]})})})]}),/*#__PURE__*/_jsx(\"div\",{className:\"h-full max-h-[200px] min-h-[200px] w-full flex-grow\",children:/*#__PURE__*/_jsx(Logs,{})})]})]})]})]});};export default RoutePage;{/* \n          <Button  onBtnClick={() => onPointClickHandler(\"home\")}>\n            <span className=\"iconPoint\" />\n            <span\n              className={`mx-auto ${\n                selectedPointType === \"home\" ? \"text-green-600\" : \"color-white\"\n              }`}\n            >\n              Home point\n            </span>\n          </Button>\n          <Button  onBtnClick={() => onPointClickHandler(\"charge\")}>\n            <span className=\"iconCharge\" />\n            <span\n              className={`mx-auto ${\n                selectedPointType === \"charge\"\n                  ? \"text-green-600\"\n                  : \"color-white\"\n              }`}\n            >\n              Charge point\n            </span>\n          </Button>\n          <Button  onBtnClick={() => onPointClickHandler(\"navigate\")}>\n            <span className=\"iconInfo\" />\n            <span\n              className={`mx-auto ${\n                selectedPointType === \"navigate\"\n                  ? \"text-green-600\"\n                  : \"color-white\"\n              }`}\n            >\n              Nav point\n            </span>\n          </Button>\n           */}","map":{"version":3,"names":["React","useContext","useRef","useState","useEffect","useCallback","ToastContainer","toast","RosContext","AppConfig","testStructure","TimeModal","RouteModal","TextInputModal","Map","Logs","Button","cos","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","removeCsv","data","Array","isArray","map","item","replace","result","key","replaceUnderscoresInKeysAndValues","obj","newObj","Object","prototype","hasOwnProperty","call","newKey","processObjectStrings","trim","findMapArray","structure","activeFiles","groupObject","find","floor","group","mapsArray","mapObject","room","removePointFromCanvas","markerOnMap","window","NAV2D","orientatedPointItem","pointsArray","filter","marker","canvas","scene","removeChild","finishedPointItem","RoutePage","ros","_useState","_useState2","_slicedToArray","selectedPointType","setSelectedPointType","_useState3","_useState4","pointsSettable","setPointsSettable","_useState5","_useState6","hoursValue","setHoursValue","latestHoursValue","_useState7","_useState8","minutesValue","setMinutesValue","latestMinutesValue","current","_useState9","route","_useState10","selectedFile","setSelectedFile","_useState11","_useState12","openRouteModal","setOpenRouteModal","_useState13","_useState14","openTimeModal","setOpenTimeModal","_useState15","_useState16","openInputModal","setOpenInputModal","_useState17","_useState18","filesData","setFilesData","childRef","routesModalType","isRoutesModalWithInput","routesModalHeader","modalKey","textInputHeader","textInputPlaceholder","filesReqTopic","ROSLIB","Topic","name","messageType","filesResonseTopic","uiOperationTopic","UI_OPERATION_TOPIC","onMapClickHandler","arePointsSettable","timeObj","hours","minutes","setTimeout","warn","sendPointToRobot","getMockedData","serializedTestArray","serializedTestArrayWithSpaces","testActiveFileWithSpaces","active_files","ClearMap","onOperationTopicPublish","currentFilesResponseTopic","currentMap","subscribe","response","responseObject","JSON","parse","serializedArray","arrayWithSpaces","activeFilesWithSpaces","filtredArrayBySelectedRoute","publish","unsubscribe","mapElement","getMapRef","removeEventListener","message","Message","onRouteFormSubmitHandler","operationsConfig","CHANGE_ROUTE","path","preActions","postActions","currentOperation","objToSendWithoutSpaces","stringifiedObjToSend","stringify","messageToSend","concat","onTimeFormSubmitHandler","onInputFormSubmitHandler","SAVE_ROUTE","pointType","RENAME_ROUTE","route_old","route_new","newFileData","onNewRouteClick","addEventListener","onPlanRouteClick","onSaveRouteClick","dataToSend","onChangeRouteClick","console","log","onEditRouteClick","currentRouteData","onClearRouteClick","onDeleteRouteClick","onRenameRouteClick","onPointClickHandler","children","routesList","headerText","modalHandler","header","placeholder","className","ref","onBtnClick","type","size"],"sources":["/home/darkadius/ros2_ws/src/BotshareWIP/ROS2/robotui/src/pages/RoutePage.jsx"],"sourcesContent":["import React, {\n  useContext,\n  useRef,\n  useState,\n  useEffect,\n  useCallback,\n} from \"react\";\nimport { ToastContainer, toast } from \"react-toastify\";\nimport \"react-toastify/dist/ReactToastify.css\";\n\nimport { RosContext } from \"../app/App\";\nimport { AppConfig } from \"../shared/constants/index\";\nimport { testStructure } from \"../shared/constants/testjson\";\n\nimport TimeModal from \"../components/modal/TimeModal\";\nimport RouteModal from \"../components/modal/RouteModal\";\nimport TextInputModal from \"../components/modal/TextInputModal\";\n\nimport Map from \"../components/Map\";\nimport Logs from \"../components/Logs\";\nimport Button from \"../shared/ui/Button\";\nimport { cos } from \"three/examples/jsm/nodes/Nodes.js\";\n\nconst removeCsv = (data) => {\n  if (Array.isArray(data)) {\n    return data.map((item) => {\n      if (typeof item === \"string\") {\n        return item.replace(\".csv\", \"\");\n      }\n      return removeCsv(item);\n    });\n  } else if (typeof data === \"object\" && data !== null) {\n    const result = {};\n    for (const key in data) {\n      result[key] = removeCsv(data[key]);\n    }\n    return result;\n  }\n  return data;\n};\n\nfunction replaceUnderscoresInKeysAndValues(obj) {\n  if (Array.isArray(obj)) {\n    return obj.map((item) => replaceUnderscoresInKeysAndValues(item));\n  } else if (typeof obj === \"object\" && obj !== null) {\n    const newObj = {};\n    for (const key in obj) {\n      if (Object.prototype.hasOwnProperty.call(obj, key)) {\n        const newKey = key.replace(/_/g, \" \");\n        newObj[newKey] = replaceUnderscoresInKeysAndValues(obj[key]);\n      }\n    }\n    return newObj;\n  } else if (typeof obj === \"string\") {\n    return obj.replace(/_/g, \" \");\n  }\n  return obj;\n}\n\nconst processObjectStrings = (obj) => {\n  if (typeof obj === \"object\" && obj !== null) {\n    const result = {};\n    for (const key in obj) {\n      if (Object.prototype.hasOwnProperty.call(obj, key)) {\n        result[key] = processObjectStrings(obj[key]);\n      }\n    }\n    return result;\n  } else if (typeof obj === \"string\") {\n    return obj.trim().replace(/\\s/g, \"_\");\n  }\n  return obj;\n};\n\nconst findMapArray = (structure, activeFiles) => {\n  const groupObject = structure.find((floor) =>\n    Object.prototype.hasOwnProperty.call(floor, activeFiles.group),\n  );\n\n  if (groupObject) {\n    const mapsArray = groupObject[activeFiles.group];\n\n    const mapObject = mapsArray.find((room) =>\n      Object.prototype.hasOwnProperty.call(room, activeFiles.map),\n    );\n\n    if (mapObject) {\n      return mapObject[activeFiles.map];\n    }\n  }\n\n  return [];\n};\n\nconst removePointFromCanvas = () => {\n  const markerOnMap = window.NAV2D.orientatedPointItem;\n  window.NAV2D.pointsArray = window.NAV2D.pointsArray.filter(\n    (marker) => marker !== markerOnMap,\n  );\n  window.NAV2D.canvas.scene.removeChild(markerOnMap);\n  window.NAV2D.finishedPointItem = null;\n  window.NAV2D.orientatedPointItem = null;\n};\n\nconst RoutePage = () => {\n  const ros = useContext(RosContext);\n  // eslint-disable-next-line no-unused-vars\n  const [selectedPointType, setSelectedPointType] = useState(null);\n  const [pointsSettable, setPointsSettable] = useState(false);\n  // eslint-disable-next-line no-unused-vars\n  const [hoursValue, setHoursValue] = useState(\"0\");\n  const latestHoursValue = useRef(hoursValue);\n  // eslint-disable-next-line no-unused-vars\n  const [minutesValue, setMinutesValue] = useState(\"0\");\n  const latestMinutesValue = useRef(minutesValue);\n\n  useEffect(() => {\n    latestHoursValue.current = hoursValue;\n    latestMinutesValue.current = minutesValue;\n  }, [hoursValue, minutesValue]);\n\n  const [selectedFile, setSelectedFile] = useState({\n    group: \"\",\n    map: \"\",\n    route: \"\",\n  });\n  const [openRouteModal, setOpenRouteModal] = useState(false);\n  const [openTimeModal, setOpenTimeModal] = useState(false);\n  const [openInputModal, setOpenInputModal] = useState(false);\n\n  const [filesData, setFilesData] = useState([]);\n\n  const childRef = useRef(null);\n  const routesModalType = useRef(null);\n  const isRoutesModalWithInput = useRef(null);\n  const routesModalHeader = useRef(null);\n  const modalKey = useRef(null);\n\n  const textInputHeader = useRef(null);\n  const textInputPlaceholder = useRef(null);\n\n  /* TOPICS */\n\n  const filesReqTopic = useRef(\n    new window.ROSLIB.Topic({\n      ros,\n      name: \"/nav_data_req\",\n      messageType: \"std_msgs/Empty\",\n    }),\n  );\n\n  const filesResonseTopic = useRef(\n    new window.ROSLIB.Topic({\n      ros,\n      name: \"/nav_data_resp\",\n      messageType: \"std_msgs/String\",\n    }),\n  );\n\n  const uiOperationTopic = useRef(\n    new window.ROSLIB.Topic({\n      ros,\n      name: AppConfig.UI_OPERATION_TOPIC,\n      messageType: \"std_msgs/String\",\n    }),\n  );\n\n  const onMapClickHandler = useCallback(() => {\n    /**\n     * У нас при отжатии кнопки канвас генерирует window.NAV2D.orientatedPointItem, который нужен внутри sendPointToRobot, onMapClickHandler тоже срабатывает при отжатии кнопки и на момент вызова sendPointToRobot orientatedPointItem ещё не создан. Для решения проблемы сейчас и используется костыль из таймера.\n     */\n\n    if (!window.NAV2D.arePointsSettable) return;\n\n    let timeObj = {\n      hours: latestHoursValue.current,\n      minutes: latestMinutesValue.current,\n    };\n\n    setTimeout(() => {\n      if (!timeObj.hours && !timeObj.minutes) {\n        toast.warn(\"Enter hours and minutes\");\n        removePointFromCanvas();\n        return;\n      }\n\n      if (timeObj.hours < 0 || timeObj.hours > 23) {\n        toast.warn(\"Hours can't be less then 0 and more then 23\");\n        removePointFromCanvas();\n        return;\n      }\n\n      if (timeObj.minutes < 0 || timeObj.minutes > 59) {\n        toast.warn(\"Minutes can't be less then 0 and more then 59\");\n        removePointFromCanvas();\n        return;\n      }\n\n      window.NAV2D.sendPointToRobot(ros, timeObj);\n    }, 0);\n  }, [ros]);\n\n  // eslint-disable-next-line no-unused-vars\n  const getMockedData = () => {\n    const serializedTestArray = removeCsv(testStructure.structure);\n    const serializedTestArrayWithSpaces =\n      replaceUnderscoresInKeysAndValues(serializedTestArray);\n    const testActiveFileWithSpaces = replaceUnderscoresInKeysAndValues(\n      testStructure.active_files,\n    );\n\n    setFilesData(serializedTestArrayWithSpaces);\n    setSelectedFile(testActiveFileWithSpaces);\n  };\n\n  useEffect(() => {\n    window.NAV2D.ClearMap();\n    onOperationTopicPublish(\"clear_route\");\n\n    getMockedData();\n\n    const currentFilesResponseTopic = filesResonseTopic.current;\n    const currentMap = childRef.current;\n\n    currentFilesResponseTopic.subscribe((data) => {\n      const response = data.data;\n      const responseObject = JSON.parse(response);\n\n      const serializedArray = removeCsv(responseObject.structure);\n      const arrayWithSpaces =\n        replaceUnderscoresInKeysAndValues(serializedArray);\n\n      // const serializedActiveFile = {\n      //   group: responseObject.active_files.group,\n      //   map: responseObject.active_files.map,\n      //   route: responseObject.active_files.route.replace(\".csv\", \"\"),\n      // };\n\n      const activeFilesWithSpaces = replaceUnderscoresInKeysAndValues({\n        group: responseObject.active_files.group,\n        map: responseObject.active_files.map,\n        route: responseObject.active_files.route.replace(\".csv\", \"\"),\n      });\n\n      const filtredArrayBySelectedRoute = findMapArray(\n        arrayWithSpaces,\n        activeFilesWithSpaces,\n      );\n\n      setFilesData(filtredArrayBySelectedRoute);\n      setSelectedFile(activeFilesWithSpaces);\n    });\n\n    filesReqTopic.current.publish();\n\n    return () => {\n      currentFilesResponseTopic.unsubscribe();\n      window.NAV2D.arePointsSettable = false;\n\n      const mapElement = currentMap.getMapRef();\n      if (mapElement) {\n        mapElement.removeEventListener(\"mouseup\", onMapClickHandler);\n      }\n    };\n  }, [onMapClickHandler]);\n\n  const onOperationTopicPublish = (message) => {\n    uiOperationTopic.current.publish(\n      new window.ROSLIB.Message({ data: message }),\n    );\n  };\n\n  /* FROM HANDLERS */\n\n  const onRouteFormSubmitHandler = (data) => {\n    setOpenRouteModal(false);\n\n    if (data) {\n      const operationsConfig = {\n        CHANGE_ROUTE: {\n          path: \"change_route\",\n          data: {\n            group: selectedFile.group,\n            map: selectedFile.map,\n            route: data,\n          },\n          preActions: () => window.NAV2D.ClearMap(),\n          postActions: () =>\n            setFilesData({\n              group: selectedFile.group,\n              map: selectedFile.map,\n              route: data,\n            }),\n        },\n      };\n\n      const currentOperation = operationsConfig[modalKey.current];\n      if (currentOperation) {\n        currentOperation.preActions && currentOperation.preActions();\n        const objToSendWithoutSpaces = processObjectStrings(\n          currentOperation.data,\n        );\n\n        const stringifiedObjToSend = JSON.stringify(objToSendWithoutSpaces);\n        const messageToSend = `${currentOperation.path}/${stringifiedObjToSend}`;\n        onOperationTopicPublish(messageToSend);\n        currentOperation.postActions && currentOperation.postActions();\n      }\n    }\n\n    modalKey.current = null;\n    routesModalType.current = null;\n    isRoutesModalWithInput.current = null;\n    routesModalHeader.current = null;\n  };\n\n  // TODELETE\n  const onTimeFormSubmitHandler = (data) => {\n    setOpenTimeModal(false);\n\n    if (data) {\n      window.NAV2D.sendPointToRobot(ros, data);\n    } else {\n      const markerOnMap = window.NAV2D.orientatedPointItem;\n      window.NAV2D.pointsArray = window.NAV2D.pointsArray.filter(\n        (marker) => marker !== markerOnMap,\n      );\n      window.NAV2D.canvas.scene.removeChild(markerOnMap);\n      window.NAV2D.finishedPointItem = null;\n      window.NAV2D.orientatedPointItem = null;\n    }\n  };\n\n  const onInputFormSubmitHandler = (data) => {\n    setOpenInputModal(false);\n\n    if (data) {\n      const operationsConfig = {\n        SAVE_ROUTE: {\n          path: \"save_route\",\n          data: {\n            group: selectedFile.group,\n            map: selectedFile.map,\n            route: data,\n          },\n\n          postActions: () => {\n            const mapElement = childRef.current.getMapRef();\n\n            if (mapElement) {\n              mapElement.removeEventListener(\"mouseup\", onMapClickHandler);\n            }\n\n            setPointsSettable(false);\n            selectedFile.route = data;\n            setSelectedPointType(null);\n            window.NAV2D.pointType = null;\n            window.NAV2D.arePointsSettable = false;\n          },\n        },\n\n        RENAME_ROUTE: {\n          path: \"rename_route\",\n          data: {\n            group: selectedFile.group,\n            map: selectedFile.map,\n            route_old: selectedFile.route,\n            route_new: data,\n          },\n          postActions: () => {\n            const newFileData = {\n              group: selectedFile.group,\n              map: selectedFile.map,\n              route: data,\n            };\n            setSelectedFile(newFileData);\n          },\n        },\n      };\n\n      const currentOperation = operationsConfig[modalKey.current];\n\n      if (currentOperation) {\n        currentOperation.preActions && currentOperation.preActions();\n\n        const objToSendWithoutSpaces = processObjectStrings(\n          currentOperation.data,\n        );\n        const stringifiedObjToSend = JSON.stringify(objToSendWithoutSpaces);\n\n        const messageToSend = `${currentOperation.path}/${stringifiedObjToSend}`;\n        onOperationTopicPublish(messageToSend);\n        currentOperation.postActions && currentOperation.postActions();\n      }\n    }\n\n    modalKey.current = null;\n    textInputHeader.current = null;\n    textInputPlaceholder.current = null;\n  };\n\n  /* BUTTON HANDLERS */\n\n  const onNewRouteClick = () => {\n    setSelectedPointType(null);\n    setSelectedFile({\n      group: selectedFile.group,\n      map: selectedFile.map,\n      route: \"New route\",\n    });\n\n    window.NAV2D.pointType = null;\n    window.NAV2D.arePointsSettable = true;\n\n    const mapElement = childRef.current.getMapRef();\n\n    if (mapElement) {\n      mapElement.addEventListener(\"mouseup\", onMapClickHandler);\n    }\n\n    setPointsSettable(true);\n    window.NAV2D.ClearMap();\n    onOperationTopicPublish(\"clear_route\");\n  };\n\n  const onPlanRouteClick = () => {\n    toast.warn(\"Comming soon...\");\n  };\n  \n  const onSaveRouteClick = () => {\n    if (!pointsSettable) return;\n\n    if (selectedFile.route !== \"New route\") {\n      const dataToSend = {\n        group: selectedFile.group,\n        map: selectedFile.map,\n        route: selectedFile.route,\n      };\n\n      const objToSendWithoutSpaces = processObjectStrings(dataToSend);\n      const stringifiedObjToSend = JSON.stringify(objToSendWithoutSpaces);\n\n      const messageToSend = `save_route/${stringifiedObjToSend}`;\n      onOperationTopicPublish(messageToSend);\n\n      setSelectedPointType(null);\n      window.NAV2D.pointType = null;\n      window.NAV2D.arePointsSettable = false;\n\n      const mapElement = childRef.current.getMapRef();\n\n      if (mapElement) {\n        mapElement.removeEventListener(\"mouseup\", onMapClickHandler);\n      }\n\n      setPointsSettable(false);\n      return;\n    }\n\n    modalKey.current = \"SAVE_ROUTE\";\n    textInputHeader.current = \"Enter new route name\";\n    textInputPlaceholder.current = \"Name...\";\n    setOpenInputModal(true);\n  };\n\n  const onChangeRouteClick = () => {\n    console.log(\"filesData\", filesData);\n    window.NAV2D.arePointsSettable = false;\n    setPointsSettable(false);\n\n    modalKey.current = \"CHANGE_ROUTE\";\n    routesModalType.current = \"selectRoute\";\n    isRoutesModalWithInput.current = false;\n    routesModalHeader.current = \"Select route you want to browse\";\n    setOpenRouteModal(true);\n  };\n\n  const onEditRouteClick = () => {\n    if (pointsSettable) {\n      setPointsSettable(false);\n    } else {\n      window.NAV2D.ClearMap();\n\n      const currentRouteData = {\n        group: selectedFile.group,\n        map: selectedFile.map,\n        route: selectedFile.route,\n      };\n\n      const objToSendWithoutSpaces = processObjectStrings(currentRouteData);\n      const stringifiedObjToSend = JSON.stringify(objToSendWithoutSpaces);\n\n      const messageToSend = `edit_route/${stringifiedObjToSend}`;\n\n      onOperationTopicPublish(messageToSend);\n\n      window.NAV2D.arePointsSettable = true;\n\n      const mapElement = childRef.current.getMapRef();\n      if (mapElement) {\n        mapElement.addEventListener(\"mouseup\", onMapClickHandler);\n      }\n\n      setPointsSettable(true);\n    }\n  };\n\n  const onClearRouteClick = () => {\n    if (!pointsSettable) return;\n    window.NAV2D.ClearMap();\n    onOperationTopicPublish(\"clear_route\");\n  };\n\n  const onDeleteRouteClick = () => {\n    window.NAV2D.ClearMap();\n\n    const currentRouteData = {\n      group: selectedFile.group,\n      map: selectedFile.map,\n      route: selectedFile.route,\n    };\n\n    const objToSendWithoutSpaces = processObjectStrings(currentRouteData);\n    const stringifiedObjToSend = JSON.stringify(objToSendWithoutSpaces);\n\n    const messageToSend = `delete_route/${stringifiedObjToSend}`;\n\n    onOperationTopicPublish(messageToSend);\n\n    // modalKey.current = \"DELETE_ROUTE\";\n    // routesModalType.current = \"selectRoute\";\n    // isRoutesModalWithInput.current = false;\n    // routesModalHeader.current = \"Select route you want to delete\";\n    // setOpenRouteModal(true);\n  };\n\n  const onRenameRouteClick = () => {\n    // console.log(!pointsSettable || selectedFile.route === \"New route\");\n    // if (selectedFile.route === \"New route\") return;\n    modalKey.current = \"RENAME_ROUTE\";\n    textInputHeader.current = \"Enter route new name\";\n    textInputPlaceholder.current = \"Name...\";\n    setOpenInputModal(true);\n  };\n\n  // eslint-disable-next-line no-unused-vars\n  const onPointClickHandler = (data) => {\n    setSelectedPointType(data);\n    window.NAV2D.pointType = data;\n  };\n\n  return (\n    <>\n      <ToastContainer />\n\n      {openRouteModal && (\n        <RouteModal\n          routesList={filesData}\n          headerText={routesModalHeader.current}\n          modalHandler={onRouteFormSubmitHandler}\n        />\n      )}\n\n      {openTimeModal && <TimeModal modalHandler={onTimeFormSubmitHandler} />}\n\n      {openInputModal && (\n        <TextInputModal\n          header={textInputHeader.current}\n          placeholder={textInputPlaceholder.current}\n          routesList={filesData}\n          modalHandler={onInputFormSubmitHandler}\n        />\n      )}\n\n      <div className=\"sectionHeight flex flex-col gap-7 pt-[30px]\">\n        <h2 className=\"flex w-full flex-wrap items-center justify-center gap-3 text-center font-[RobotoMono] text-3xl font-bold text-themeBlue\">\n          <span>\n            Group:{\" \"}\n            <span className=\"text-themeDarkBlue\">{selectedFile.group}</span>\n          </span>\n          <span>\n            {\" \"}\n            Map: <span className=\"text-themeDarkBlue\">{selectedFile.map}</span>\n          </span>\n          <span>\n            {selectedFile.route !== \"New route\" && <span>Current route:</span>}{\" \"}\n            <span className=\"text-themeDarkBlue\">{selectedFile.route}</span>\n          </span>\n        </h2>\n\n        <div className=\"flex h-full flex-col justify-start gap-[73px] md:flex-row\">\n          <section className=\"color-white flex w-full flex-col items-start justify-start md:w-[55%]\">\n            <div className=\"h-[400px] w-full lg:h-[674px]\">\n              <Map ref={childRef} />\n            </div>\n          </section>\n\n          <section className=\"color-white flex h-[400px] w-full flex-1 flex-col items-center justify-start gap-7 md:w-2/5 lg:gap-[233px]\">\n            <div className=\"flex w-full flex-col gap-6 lg:gap-3\">\n              <div className=\"flex w-full flex-col items-center justify-center gap-6 lg:flex-row lg:gap-3\">\n                <div className=\"w-full flex-1\">\n                  <Button onBtnClick={onEditRouteClick}>\n                    {pointsSettable && <div>Cancel</div>}\n                    {!pointsSettable && (\n                      <div>\n                        <span className=\"iconMap\" />\n                        <span className=\"mx-auto\">Edit</span>\n                      </div>\n                    )}\n                  </Button>\n                </div>\n                <div className=\"w-full flex-1\">\n                  <Button\n                    onBtnClick={onChangeRouteClick}\n                    type={pointsSettable ? \"disabled\" : \"\"}\n                  >\n                    <span className=\"iconCharge\" />\n                    <span className=\"mx-auto\">Change</span>\n                  </Button>\n                </div>\n                <div className=\"w-full flex-1\">\n                  <Button\n                    onBtnClick={onSaveRouteClick}\n                    type={pointsSettable ? \"\" : \"disabled\"}\n                  >\n                    <span className=\"iconSave\" />\n                    <span className=\"mx-auto\">Save</span>\n                  </Button>\n                </div>\n              </div>\n\n              <div className=\"flex w-full flex-col items-center justify-center gap-6 lg:flex-row lg:gap-4\">\n                <div className=\"w-full flex-1\">\n                  <Button\n                    onBtnClick={onNewRouteClick}\n                    type={pointsSettable ? \"disabled\" : \"\"}\n                  >\n                    <span className=\"iconPlus\" />\n                    <span className=\"mx-auto\">Create</span>\n                  </Button>\n                </div>\n                <div className=\"w-full flex-1\">\n                  <Button\n                    size=\"small\"\n                    onBtnClick={onPlanRouteClick}\n                  >\n                    <span className=\"iconMap\" />\n                    <span className=\"mx-auto\">Plan</span>\n                  </Button>\n                </div>\n                <div className=\"w-full flex-1\">\n                  <Button\n                    onBtnClick={onRenameRouteClick}\n                    type={\n                      pointsSettable || selectedFile.route === \"Null\"\n                        ? \"disabled\"\n                        : \"\"\n                    }\n                  >\n                    <span className=\"iconMap\" />\n                    <span className=\"mx-auto\">Rename</span>\n                  </Button>\n                </div>\n                <div className=\"w-full flex-1\">\n                  <Button\n                    onBtnClick={onDeleteRouteClick}\n                    type={pointsSettable ? \"disabled\" : \"\"}\n                  >\n                    <span className=\"iconTrash\" />\n                    <span className=\"mx-auto\">Delete</span>\n                  </Button>\n                </div>\n              </div>\n\n              <div className=\"flex w-full flex-col items-center justify-center gap-6 lg:flex-row lg:gap-3\">\n                <div className=\"w-full flex-1\">\n                  <Button\n                    onBtnClick={onClearRouteClick}\n                    type={!pointsSettable ? \"disabled\" : \"\"}\n                  >\n                    <span className=\"iconMap\" />\n                    <span className=\"mx-auto\">Clear</span>\n                  </Button>\n                </div>\n              </div>\n            </div>\n\n            <div className=\"h-full max-h-[200px] min-h-[200px] w-full flex-grow\">\n              <Logs />\n            </div>\n          </section>\n        </div>\n      </div>\n    </>\n  );\n};\n\nexport default RoutePage;\n\n{\n  /* \n          <Button  onBtnClick={() => onPointClickHandler(\"home\")}>\n            <span className=\"iconPoint\" />\n            <span\n              className={`mx-auto ${\n                selectedPointType === \"home\" ? \"text-green-600\" : \"color-white\"\n              }`}\n            >\n              Home point\n            </span>\n          </Button>\n          <Button  onBtnClick={() => onPointClickHandler(\"charge\")}>\n            <span className=\"iconCharge\" />\n            <span\n              className={`mx-auto ${\n                selectedPointType === \"charge\"\n                  ? \"text-green-600\"\n                  : \"color-white\"\n              }`}\n            >\n              Charge point\n            </span>\n          </Button>\n          <Button  onBtnClick={() => onPointClickHandler(\"navigate\")}>\n            <span className=\"iconInfo\" />\n            <span\n              className={`mx-auto ${\n                selectedPointType === \"navigate\"\n                  ? \"text-green-600\"\n                  : \"color-white\"\n              }`}\n            >\n              Nav point\n            </span>\n          </Button>\n           */\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}