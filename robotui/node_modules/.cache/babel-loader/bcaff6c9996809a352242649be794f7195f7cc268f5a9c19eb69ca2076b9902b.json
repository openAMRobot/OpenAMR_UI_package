{"ast":null,"code":"import _createForOfIteratorHelper from \"/home/darkadius/ros2_ws/src/BotshareWIP/ROS2/robotui/node_modules/@babel/runtime/helpers/esm/createForOfIteratorHelper.js\";\nimport _classCallCheck from \"/home/darkadius/ros2_ws/src/BotshareWIP/ROS2/robotui/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";\nimport _createClass from \"/home/darkadius/ros2_ws/src/BotshareWIP/ROS2/robotui/node_modules/@babel/runtime/helpers/esm/createClass.js\";\nimport _inherits from \"/home/darkadius/ros2_ws/src/BotshareWIP/ROS2/robotui/node_modules/@babel/runtime/helpers/esm/inherits.js\";\nimport _createSuper from \"/home/darkadius/ros2_ws/src/BotshareWIP/ROS2/robotui/node_modules/@babel/runtime/helpers/esm/createSuper.js\";\nimport Node from '../core/Node.js';\nimport AnalyticLightNode from './AnalyticLightNode.js';\nimport { nodeObject, nodeProxy } from '../shadernode/ShaderNode.js';\nvar LightNodes = new WeakMap();\nvar sortLights = function sortLights(lights) {\n  return lights.sort(function (a, b) {\n    return a.id - b.id;\n  });\n};\nvar LightsNode = /*#__PURE__*/function (_Node) {\n  _inherits(LightsNode, _Node);\n  var _super = _createSuper(LightsNode);\n  function LightsNode() {\n    var _this;\n    var lightNodes = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];\n    _classCallCheck(this, LightsNode);\n    _this = _super.call(this, 'vec3');\n    _this.lightNodes = lightNodes;\n    _this._hash = null;\n    return _this;\n  }\n  _createClass(LightsNode, [{\n    key: \"hasLight\",\n    get: function get() {\n      return this.lightNodes.length > 0;\n    }\n  }, {\n    key: \"setup\",\n    value: function setup(builder) {\n      var lightNodes = this.lightNodes;\n      var _iterator = _createForOfIteratorHelper(lightNodes),\n        _step;\n      try {\n        for (_iterator.s(); !(_step = _iterator.n()).done;) {\n          var lightNode = _step.value;\n          lightNode.build(builder);\n        }\n      } catch (err) {\n        _iterator.e(err);\n      } finally {\n        _iterator.f();\n      }\n    }\n  }, {\n    key: \"getHash\",\n    value: function getHash(builder) {\n      if (this._hash === null) {\n        var hash = '';\n        var lightNodes = this.lightNodes;\n        var _iterator2 = _createForOfIteratorHelper(lightNodes),\n          _step2;\n        try {\n          for (_iterator2.s(); !(_step2 = _iterator2.n()).done;) {\n            var lightNode = _step2.value;\n            hash += lightNode.getHash(builder) + ' ';\n          }\n        } catch (err) {\n          _iterator2.e(err);\n        } finally {\n          _iterator2.f();\n        }\n        this._hash = hash;\n      }\n      return this._hash;\n    }\n  }, {\n    key: \"getLightNodeByHash\",\n    value: function getLightNodeByHash(hash) {\n      var lightNodes = this.lightNodes;\n      var _iterator3 = _createForOfIteratorHelper(lightNodes),\n        _step3;\n      try {\n        for (_iterator3.s(); !(_step3 = _iterator3.n()).done;) {\n          var lightNode = _step3.value;\n          if (lightNode.light.uuid === hash) {\n            return lightNode;\n          }\n        }\n      } catch (err) {\n        _iterator3.e(err);\n      } finally {\n        _iterator3.f();\n      }\n      return null;\n    }\n  }, {\n    key: \"fromLights\",\n    value: function fromLights() {\n      var lights = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];\n      var lightNodes = [];\n      lights = sortLights(lights);\n      var _iterator4 = _createForOfIteratorHelper(lights),\n        _step4;\n      try {\n        for (_iterator4.s(); !(_step4 = _iterator4.n()).done;) {\n          var light = _step4.value;\n          var lightNode = this.getLightNodeByHash(light.uuid);\n          if (lightNode === null) {\n            var lightClass = light.constructor;\n            var lightNodeClass = LightNodes.has(lightClass) ? LightNodes.get(lightClass) : AnalyticLightNode;\n            lightNode = nodeObject(new lightNodeClass(light));\n          }\n          lightNodes.push(lightNode);\n        }\n      } catch (err) {\n        _iterator4.e(err);\n      } finally {\n        _iterator4.f();\n      }\n      this.lightNodes = lightNodes;\n      this._hash = null;\n      return this;\n    }\n  }]);\n  return LightsNode;\n}(Node);\nexport default LightsNode;\nexport var lights = function lights(_lights) {\n  return nodeObject(new LightsNode().fromLights(_lights));\n};\nexport var lightsWithoutWrap = nodeProxy(LightsNode);\nexport function addLightNode(lightClass, lightNodeClass) {\n  if (LightNodes.has(lightClass)) throw new Error(\"Redefinition of light node \".concat(lightNodeClass.type));\n  if (typeof lightClass !== 'function') throw new Error(\"Light \".concat(lightClass.name, \" is not a class\"));\n  if (typeof lightNodeClass !== 'function' || !lightNodeClass.type) throw new Error(\"Light node \".concat(lightNodeClass.type, \" is not a class\"));\n  LightNodes.set(lightClass, lightNodeClass);\n}","map":{"version":3,"names":["Node","AnalyticLightNode","nodeObject","nodeProxy","LightNodes","WeakMap","sortLights","lights","sort","a","b","id","LightsNode","_Node","_inherits","_super","_createSuper","_this","lightNodes","arguments","length","undefined","_classCallCheck","call","_hash","_createClass","key","get","value","setup","builder","_iterator","_createForOfIteratorHelper","_step","s","n","done","lightNode","build","err","e","f","getHash","hash","_iterator2","_step2","getLightNodeByHash","_iterator3","_step3","light","uuid","fromLights","_iterator4","_step4","lightClass","constructor","lightNodeClass","has","push","lightsWithoutWrap","addLightNode","Error","concat","type","name","set"],"sources":["/home/darkadius/ros2_ws/src/BotshareWIP/ROS2/robotui/node_modules/three/examples/jsm/nodes/lighting/LightsNode.js"],"sourcesContent":["import Node from '../core/Node.js';\nimport AnalyticLightNode from './AnalyticLightNode.js';\nimport { nodeObject, nodeProxy } from '../shadernode/ShaderNode.js';\n\nconst LightNodes = new WeakMap();\n\nconst sortLights = ( lights ) => {\n\n\treturn lights.sort( ( a, b ) => a.id - b.id );\n\n};\n\nclass LightsNode extends Node {\n\n\tconstructor( lightNodes = [] ) {\n\n\t\tsuper( 'vec3' );\n\n\t\tthis.lightNodes = lightNodes;\n\n\t\tthis._hash = null;\n\n\t}\n\n\tget hasLight() {\n\n\t\treturn this.lightNodes.length > 0;\n\n\t}\n\n\tsetup( builder ) {\n\n\t\tconst lightNodes = this.lightNodes;\n\n\t\tfor ( const lightNode of lightNodes ) {\n\n\t\t\tlightNode.build( builder );\n\n\t\t}\n\n\t}\n\n\tgetHash( builder ) {\n\n\t\tif ( this._hash === null ) {\n\n\t\t\tlet hash = '';\n\n\t\t\tconst lightNodes = this.lightNodes;\n\n\t\t\tfor ( const lightNode of lightNodes ) {\n\n\t\t\t\thash += lightNode.getHash( builder ) + ' ';\n\n\t\t\t}\n\n\t\t\tthis._hash = hash;\n\n\t\t}\n\n\t\treturn this._hash;\n\n\t}\n\n\tgetLightNodeByHash( hash ) {\n\n\t\tconst lightNodes = this.lightNodes;\n\n\t\tfor ( const lightNode of lightNodes ) {\n\n\t\t\tif ( lightNode.light.uuid === hash ) {\n\n\t\t\t\treturn lightNode;\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn null;\n\n\t}\n\n\tfromLights( lights = [] ) {\n\n\t\tconst lightNodes = [];\n\n\t\tlights = sortLights( lights );\n\n\t\tfor ( const light of lights ) {\n\n\t\t\tlet lightNode = this.getLightNodeByHash( light.uuid );\n\n\t\t\tif ( lightNode === null ) {\n\n\t\t\t\tconst lightClass = light.constructor;\n\t\t\t\tconst lightNodeClass = LightNodes.has( lightClass ) ? LightNodes.get( lightClass ) : AnalyticLightNode;\n\n\t\t\t\tlightNode = nodeObject( new lightNodeClass( light ) );\n\n\t\t\t}\n\n\t\t\tlightNodes.push( lightNode );\n\n\t\t}\n\n\t\tthis.lightNodes = lightNodes;\n\t\tthis._hash = null;\n\n\t\treturn this;\n\n\t}\n\n}\n\nexport default LightsNode;\n\nexport const lights = ( lights ) => nodeObject( new LightsNode().fromLights( lights ) );\nexport const lightsWithoutWrap = nodeProxy( LightsNode );\n\nexport function addLightNode( lightClass, lightNodeClass ) {\n\n\tif ( LightNodes.has( lightClass ) ) throw new Error( `Redefinition of light node ${ lightNodeClass.type }` );\n\tif ( typeof lightClass !== 'function' ) throw new Error( `Light ${ lightClass.name } is not a class` );\n\tif ( typeof lightNodeClass !== 'function' || ! lightNodeClass.type ) throw new Error( `Light node ${ lightNodeClass.type } is not a class` );\n\n\tLightNodes.set( lightClass, lightNodeClass );\n\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}